<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Windows 10</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; user-select: none; -webkit-user-select: none; }
        html, body { overflow: hidden; position: fixed; width: 100%; height: 100%; touch-action: none; overscroll-behavior: none; }
        
        /* Lockscreen */
        #lockscreen {
            position: fixed; inset: 0; z-index: 10000;
            background: url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920') center/cover;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer; transition: transform 0.5s ease;
        }
        #lockscreen.unlock { transform: translateY(-100%); }
        #lockscreen-time { color: white; font-size: 96px; font-weight: 300; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        #lockscreen-date { color: white; font-size: 24px; margin-top: 10px; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        #lockscreen-hint { position: absolute; bottom: 50px; color: white; font-size: 14px; }

        /* Desktop */
        #desktop {
            width: 100vw; height: 100vh;
            background: url('https://images.unsplash.com/photo-1579546929518-9e396f3cc809?w=1920') center/cover;
            position: relative; overflow: hidden;
        }

        /* Desktop Icons */
        .desktop-icon {
            width: 80px; padding: 8px; display: flex; flex-direction: column; align-items: center;
            cursor: pointer; border-radius: 4px; position: absolute; touch-action: none;
        }
        .desktop-icon:hover { background: rgba(255,255,255,0.2); }
        .desktop-icon.selected { background: rgba(0,120,215,0.4); border: 1px solid rgba(0,120,215,0.8); }
        .desktop-icon img, .desktop-icon .icon-emoji { width: 48px; height: 48px; margin-bottom: 4px; pointer-events: none; display: flex; align-items: center; justify-content: center; font-size: 40px; }
        .desktop-icon span { color: white; font-size: 11px; text-align: center; text-shadow: 1px 1px 2px rgba(0,0,0,0.8); pointer-events: none; }

        /* Taskbar */
        #taskbar {
            position: fixed; bottom: 0; left: 0; right: 0; height: 40px;
            background: rgba(0,0,0,0.85); backdrop-filter: blur(10px);
            display: flex; align-items: center; z-index: 1000;
        }
        
        #start-btn {
            width: 48px; height: 100%; display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: background 0.2s;
        }
        #start-btn:hover { background: rgba(255,255,255,0.1); }
        #start-btn svg { width: 18px; height: 18px; fill: white; }

        #search-box {
            width: 300px; height: 32px; margin-left: 8px;
            background: rgba(255,255,255,0.1); border: none; border-radius: 4px;
            padding: 0 12px; color: white; font-size: 13px;
        }
        #search-box::placeholder { color: rgba(255,255,255,0.6); }
        #search-box:focus { outline: none; background: rgba(255,255,255,0.15); }

        #taskbar-apps { display: flex; margin-left: 8px; height: 100%; }
        .taskbar-app {
            width: 44px; height: 100%; display: flex; align-items: center; justify-content: center;
            cursor: pointer; position: relative;
        }
        .taskbar-app:hover { background: rgba(255,255,255,0.1); }
        .taskbar-app.active { background: rgba(255,255,255,0.15); }
        .taskbar-app.active::after {
            content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 20px; height: 3px; background: #0078d4;
        }

        #system-tray {
            margin-left: auto; display: flex; align-items: center; height: 100%;
            padding: 0 8px; color: white; font-size: 12px;
        }
        .tray-icon { padding: 8px; cursor: pointer; }
        .tray-icon:hover { background: rgba(255,255,255,0.1); }
        #clock { padding: 0 12px; text-align: right; cursor: pointer; line-height: 1.3; }
        #clock:hover { background: rgba(255,255,255,0.1); }

        #notification-btn {
            width: 40px; height: 100%; display: flex; align-items: center; justify-content: center;
            cursor: pointer;
        }
        #notification-btn:hover { background: rgba(255,255,255,0.1); }

        /* Start Menu */
        #start-menu {
            position: fixed; bottom: 40px; left: 0;
            width: 600px; height: 500px;
            background: rgba(0,0,0,0.9); backdrop-filter: blur(20px);
            display: none; z-index: 999;
        }
        #start-menu.show { display: flex; }
        #start-left { width: 60px; background: rgba(0,0,0,0.3); display: flex; flex-direction: column; }
        #start-right { flex: 1; padding: 20px; overflow-y: auto; }
        .start-left-btn { width: 60px; height: 50px; display: flex; align-items: center; justify-content: center; cursor: pointer; color: white; }
        .start-left-btn:hover { background: rgba(255,255,255,0.1); }
        #user-btn { margin-top: auto; }

        #start-tiles { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
        .start-tile {
            background: #0078d4; padding: 16px; border-radius: 4px; cursor: pointer;
            display: flex; flex-direction: column; min-height: 80px;
        }
        .start-tile:hover { filter: brightness(1.1); }
        .start-tile span { color: white; font-size: 12px; }
        .tile-wide { grid-column: span 2; }

        /* Context Menu */
        #context-menu {
            position: fixed; background: rgba(40,40,40,0.95); backdrop-filter: blur(10px);
            min-width: 200px; border-radius: 8px; padding: 4px 0;
            display: none; z-index: 2000; box-shadow: 0 8px 32px rgba(0,0,0,0.5);
        }
        .context-item {
            padding: 8px 24px; color: white; font-size: 13px; cursor: pointer;
            display: flex; align-items: center; gap: 12px;
        }
        .context-item:hover { background: rgba(255,255,255,0.1); }
        .context-separator { height: 1px; background: rgba(255,255,255,0.1); margin: 4px 0; }

        /* Windows */
        .window {
            position: absolute; background: #202020; border-radius: 8px;
            box-shadow: 0 10px 50px rgba(0,0,0,0.5); display: none;
            min-width: 400px; min-height: 300px; overflow: hidden; touch-action: none;
        }
        .window.show { display: block; }
        .window.maximized { top: 0 !important; left: 0 !important; width: 100vw !important; height: calc(100vh - 40px) !important; border-radius: 0; }
        .window-header {
            height: 32px; background: #1f1f1f; display: flex; align-items: center;
            padding: 0 8px; cursor: move; touch-action: none;
        }
        .window-title { flex: 1; color: white; font-size: 12px; display: flex; align-items: center; gap: 8px; }
        .window-controls { display: flex; }
        .win-ctrl { width: 46px; height: 32px; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .win-ctrl:hover { background: rgba(255,255,255,0.1); }
        .win-ctrl.close:hover { background: #e81123; }
        .win-ctrl svg { width: 10px; height: 10px; fill: white; }
        .window-body { height: calc(100% - 32px); overflow: auto; background: #1e1e1e; color: white; }

        /* File Explorer */
        .explorer-sidebar { width: 200px; background: #202020; border-right: 1px solid #333; padding: 8px; overflow-y: auto; }
        .explorer-item { padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 13px; display: flex; align-items: center; gap: 8px; }
        .explorer-item:hover { background: rgba(255,255,255,0.1); }
        .explorer-item.active { background: rgba(0,120,215,0.3); }
        .explorer-toolbar { display: flex; align-items: center; padding: 8px; background: #2d2d2d; gap: 8px; border-bottom: 1px solid #333; }
        .explorer-path { flex: 1; background: #1a1a1a; border: 1px solid #444; padding: 6px 12px; border-radius: 4px; color: white; font-size: 12px; }
        .explorer-content { flex: 1; padding: 16px; display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 8px; align-content: start; overflow-y: auto; }
        .file-item { display: flex; flex-direction: column; align-items: center; padding: 12px 8px; border-radius: 4px; cursor: pointer; }
        .file-item:hover { background: rgba(255,255,255,0.1); }
        .file-item.selected { background: rgba(0,120,215,0.3); }
        .file-item img { width: 48px; height: 48px; margin-bottom: 4px; }
        .file-item span { font-size: 11px; text-align: center; word-break: break-word; }

        /* Linux Terminal */
        .linux-terminal { background: #300a24; color: #ffffff; padding: 10px; font-family: 'Ubuntu Mono', 'Consolas', monospace; font-size: 14px; height: 100%; overflow-y: auto; }
        .linux-prompt { color: #4ce94c; }
        .linux-path { color: #729fcf; }
        .linux-input { background: transparent; border: none; color: #ffffff; font-family: 'Ubuntu Mono', 'Consolas', monospace; font-size: 14px; width: calc(100% - 300px); outline: none; caret-color: #4ce94c; }
        .linux-line { margin-bottom: 2px; white-space: pre-wrap; word-break: break-all; }
        .linux-error { color: #ff6b6b; }
        .linux-success { color: #4ce94c; }
        .linux-info { color: #729fcf; }
        .linux-warning { color: #f9e64f; }

        /* Store */
        .store-header { padding: 20px; background: linear-gradient(135deg, #0078d4, #00bcf2); }
        .store-tabs { display: flex; background: #1a1a1a; border-bottom: 1px solid #333; }
        .store-tab { padding: 12px 24px; cursor: pointer; font-size: 14px; border-bottom: 2px solid transparent; }
        .store-tab:hover { background: rgba(255,255,255,0.05); }
        .store-tab.active { border-bottom-color: #0078d4; background: rgba(0,120,212,0.1); }
        .store-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 16px; padding: 20px; overflow-y: auto; max-height: calc(100% - 140px); }
        .store-app { background: #2d2d2d; border-radius: 8px; padding: 16px; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; }
        .store-app:hover { background: #3d3d3d; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.3); }
        .store-app-icon { font-size: 48px; margin-bottom: 12px; }
        .store-app h4 { font-size: 14px; margin-bottom: 4px; }
        .store-app p { font-size: 11px; color: #888; margin-bottom: 8px; }
        .store-app-rating { color: #ffc107; font-size: 12px; }
        .store-btn { background: #0078d4; border: none; color: white; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-size: 12px; width: 100%; margin-top: 8px; }
        .store-btn:hover { background: #1084d8; }
        .store-btn.installed { background: #107c10; }
        .store-btn.installing { background: #555; cursor: wait; }
        .store-progress { height: 4px; background: #333; border-radius: 2px; margin-top: 8px; overflow: hidden; display: none; }
        .store-progress-bar { height: 100%; background: #0078d4; width: 0%; transition: width 0.3s; }

        /* Calendar Popup */
        #calendar-popup {
            position: fixed; bottom: 48px; right: 8px;
            background: rgba(40,40,40,0.95); backdrop-filter: blur(20px);
            width: 320px; border-radius: 8px; padding: 16px;
            display: none; z-index: 1001;
        }
        #calendar-popup.show { display: block; }
        .calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; text-align: center; }
        .calendar-day { padding: 8px; border-radius: 50%; cursor: pointer; font-size: 13px; color: white; }
        .calendar-day:hover { background: rgba(255,255,255,0.1); }
        .calendar-day.today { background: #0078d4; }
        .calendar-day.header { font-weight: 600; color: #888; }

        /* Notification Center */
        #notification-center {
            position: fixed; top: 0; right: -380px; width: 380px; height: calc(100% - 40px);
            background: rgba(40,40,40,0.95); backdrop-filter: blur(20px);
            z-index: 999; transition: right 0.3s; padding: 16px; color: white; overflow-y: auto;
        }
        #notification-center.show { right: 0; }
        .quick-actions { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-top: 16px; }
        .quick-action { padding: 16px 8px; background: rgba(255,255,255,0.1); border-radius: 4px; text-align: center; cursor: pointer; font-size: 11px; }
        .quick-action:hover { background: rgba(255,255,255,0.15); }
        .quick-action.active { background: #0078d4; }
        .notification-item { background: rgba(255,255,255,0.05); padding: 12px; border-radius: 4px; margin-bottom: 8px; }
        .notification-item h4 { font-size: 13px; margin-bottom: 4px; }
        .notification-item p { font-size: 12px; color: #888; }

        /* Volume Popup */
        #volume-popup {
            position: fixed; bottom: 48px; right: 100px;
            background: rgba(40,40,40,0.95); padding: 20px;
            border-radius: 8px; display: none; z-index: 1001; color: white;
        }
        #volume-popup.show { display: block; }

        /* Animations */
        @keyframes windowOpen { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .window.show { animation: windowOpen 0.15s ease; }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #1a1a1a; }
        ::-webkit-scrollbar-thumb { background: #555; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #666; }

        /* Resize Handle */
        .resize-handle { position: absolute; right: 0; bottom: 0; width: 16px; height: 16px; cursor: se-resize; }

        /* Notepad */
        .notepad-textarea { width: 100%; height: calc(100% - 30px); background: #1e1e1e; color: white; border: none; padding: 8px; font-size: 14px; resize: none; }
        .notepad-textarea:focus { outline: none; }
        .notepad-menu { display: flex; background: #2d2d2d; padding: 4px 8px; gap: 16px; font-size: 13px; }

        /* Calculator */
        .calc-display { background: #1a1a1a; padding: 20px; text-align: right; font-size: 48px; font-weight: 300; }
        .calc-buttons { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1px; background: #333; }
        .calc-btn { padding: 20px; font-size: 18px; background: #3c3c3c; border: none; color: white; cursor: pointer; }
        .calc-btn:hover { background: #4a4a4a; }
        .calc-btn.operator { background: #323232; }
        .calc-btn.equals { background: #0078d4; }
        .calc-btn.clear { background: #d13438; }

        /* Browser */
        .browser-toolbar { display: flex; align-items: center; padding: 8px; background: #2d2d2d; gap: 8px; }
        .browser-nav-btn { width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; background: transparent; border: none; color: white; cursor: pointer; border-radius: 4px; font-size: 16px; }
        .browser-nav-btn:hover { background: rgba(255,255,255,0.1); }
        .browser-nav-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .browser-url { flex: 1; background: #1a1a1a; border: none; padding: 8px 12px; border-radius: 20px; color: white; font-size: 13px; }
        .browser-url:focus { outline: 2px solid #0078d4; }
        .browser-content { background: white; color: black; height: calc(100% - 50px); overflow: hidden; position: relative; }
        .browser-iframe { width: 100%; height: 100%; border: none; }
        .browser-home { padding: 40px; text-align: center; height: 100%; overflow: auto; }
        .google-logo { font-size: 72px; font-weight: bold; margin-bottom: 30px; }
        .google-logo span:nth-child(1) { color: #4285f4; }
        .google-logo span:nth-child(2) { color: #ea4335; }
        .google-logo span:nth-child(3) { color: #fbbc05; }
        .google-logo span:nth-child(4) { color: #4285f4; }
        .google-logo span:nth-child(5) { color: #34a853; }
        .google-logo span:nth-child(6) { color: #ea4335; }
        .google-search-box { display: flex; align-items: center; max-width: 600px; margin: 0 auto; border: 1px solid #ddd; border-radius: 24px; padding: 12px 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .google-search-box:focus-within { box-shadow: 0 2px 12px rgba(0,0,0,0.2); }
        .google-search-input { flex: 1; border: none; font-size: 16px; outline: none; background: transparent; }
        .google-search-btn { background: none; border: none; cursor: pointer; font-size: 20px; color: #4285f4; padding: 0 8px; }
        .google-buttons { margin-top: 30px; display: flex; justify-content: center; gap: 12px; flex-wrap: wrap; }
        .google-btn { background: #f8f9fa; border: 1px solid #f8f9fa; padding: 10px 16px; border-radius: 4px; cursor: pointer; font-size: 14px; color: #3c4043; }
        .google-btn:hover { border-color: #dadce0; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .google-btn.primary { background: #1a73e8; color: white; border-color: #1a73e8; }
        .google-btn.primary:hover { background: #1557b0; }
        .browser-bookmarks { display: flex; gap: 16px; justify-content: center; margin-top: 40px; flex-wrap: wrap; }
        .browser-bookmark { display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer; padding: 12px; border-radius: 8px; width: 80px; }
        .browser-bookmark:hover { background: #f1f3f4; }
        .browser-bookmark-icon { width: 48px; height: 48px; border-radius: 50%; background: #f1f3f4; display: flex; align-items: center; justify-content: center; font-size: 24px; }
        .browser-bookmark span { font-size: 12px; color: #3c4043; text-align: center; }

        /* Settings */
        .settings-sidebar { width: 250px; background: #1a1a1a; padding: 20px; }
        .settings-item { padding: 12px; border-radius: 4px; cursor: pointer; margin-bottom: 4px; display: flex; align-items: center; gap: 12px; font-size: 14px; }
        .settings-item:hover, .settings-item.active { background: rgba(255,255,255,0.1); }
        .settings-content { flex: 1; padding: 30px; overflow-y: auto; }
        .setting-row { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid #333; }
        .toggle { width: 44px; height: 22px; background: #555; border-radius: 11px; position: relative; cursor: pointer; }
        .toggle.on { background: #0078d4; }
        .toggle::after { content: ''; position: absolute; top: 2px; left: 2px; width: 18px; height: 18px; background: white; border-radius: 50%; transition: 0.2s; }
        .toggle.on::after { left: 24px; }

        /* Paint */
        .paint-toolbar { display: flex; align-items: center; padding: 8px; background: #2d2d2d; gap: 8px; flex-wrap: wrap; }
        .paint-btn { padding: 8px 12px; background: #3c3c3c; border: none; color: white; cursor: pointer; border-radius: 4px; font-size: 12px; }
        .color-picker { width: 32px; height: 32px; border: none; cursor: pointer; border-radius: 4px; }
        #paint-canvas { background: white; cursor: crosshair; touch-action: none; }

        /* Game */
        #game-canvas { background: #1a1a1a; display: block; margin: 10px auto; }
        .game-score { text-align: center; font-size: 24px; padding: 10px; }
        .game-controls { text-align: center; padding: 10px; font-size: 12px; color: #888; }

        /* Other app styles */
        .player-cover { width: 200px; height: 200px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 8px; margin: 20px auto; display: flex; align-items: center; justify-content: center; font-size: 64px; }
        .player-controls { display: flex; justify-content: center; gap: 20px; padding: 20px; }
        .player-btn { width: 48px; height: 48px; border-radius: 50%; background: #333; border: none; color: white; cursor: pointer; font-size: 18px; }
        .player-btn.play { background: #0078d4; }
        .progress-bar { height: 4px; background: #333; border-radius: 2px; margin: 0 20px; }
        .progress-fill { height: 100%; background: #0078d4; border-radius: 2px; width: 30%; }
        .weather-main { text-align: center; padding: 30px; }
        .weather-temp { font-size: 72px; font-weight: 300; }
        .weather-icon { font-size: 64px; margin: 20px 0; }
        .weather-details { display: flex; justify-content: center; gap: 40px; margin-top: 20px; }
        .mail-sidebar { width: 200px; background: #1a1a1a; padding: 8px; }
        .mail-folder { padding: 10px 12px; border-radius: 4px; cursor: pointer; font-size: 13px; }
        .mail-folder:hover { background: rgba(255,255,255,0.1); }
        .mail-list { width: 300px; background: #252525; border-right: 1px solid #333; }
        .mail-item { padding: 12px; border-bottom: 1px solid #333; cursor: pointer; }
        .mail-preview { flex: 1; padding: 20px; }
        .sticky-note { background: #fff59d; color: #333; padding: 16px; height: 100%; }
        .sticky-note textarea { width: 100%; height: calc(100% - 30px); background: transparent; border: none; resize: none; font-size: 14px; color: #333; }
        .sticky-colors { display: flex; gap: 8px; margin-bottom: 8px; }
        .sticky-color { width: 24px; height: 24px; border-radius: 50%; cursor: pointer; }
        .photo-viewer { display: flex; align-items: center; justify-content: center; height: 100%; background: #000; }
        .photo-viewer img { max-width: 100%; max-height: 100%; object-fit: contain; }
        .taskmanager-tabs { display: flex; background: #2d2d2d; }
        .taskmanager-tab { padding: 12px 20px; cursor: pointer; font-size: 13px; border-bottom: 2px solid transparent; }
        .taskmanager-tab.active { border-bottom-color: #0078d4; }
        .process-list { padding: 8px; }
        .process-item { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr; padding: 8px; font-size: 12px; border-radius: 4px; }
        .process-item:hover { background: rgba(255,255,255,0.1); }
        .process-header { font-weight: 600; color: #888; }

        /* Installed apps section in start menu */
        #installed-apps-section { margin-top: 20px; padding-top: 16px; border-top: 1px solid #333; }
        #installed-apps-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-top: 12px; }
    </style>
</head>
<body>
    <!-- Lockscreen -->
    <div id="lockscreen">
        <div id="lockscreen-time">12:00</div>
        <div id="lockscreen-date">–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ, 1 —è–Ω–≤–∞—Ä—è</div>
        <div id="lockscreen-hint">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—Ö–æ–¥–∞</div>
    </div>

    <!-- Desktop -->
    <div id="desktop">
        <!-- Desktop Icons Container -->
        <div id="desktop-icons">
            <div class="desktop-icon" data-app="explorer" style="top: 20px; left: 20px;">
                <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'><rect x='4' y='8' width='40' height='32' rx='2' fill='%23ffc107'/><rect x='4' y='14' width='40' height='26' rx='2' fill='%23ffeb3b'/></svg>">
                <span>–ü—Ä–æ–≤–æ–¥–Ω–∏–∫</span>
            </div>
            <div class="desktop-icon" data-app="recycle" style="top: 20px; left: 110px;">
                <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'><path d='M12 16v24c0 2 2 4 4 4h16c2 0 4-2 4-4V16H12z' fill='%2390a4ae'/><path d='M8 12h32v4H8z' fill='%23607d8b'/></svg>">
                <span>–ö–æ—Ä–∑–∏–Ω–∞</span>
            </div>
            <div class="desktop-icon" data-app="browser" style="top: 120px; left: 20px;">
                <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'><circle cx='24' cy='24' r='20' fill='%230078d4'/><text x='24' y='32' text-anchor='middle' fill='white' font-size='20' font-weight='bold'>e</text></svg>">
                <span>Edge</span>
            </div>
            <div class="desktop-icon" data-app="terminal" style="top: 120px; left: 110px;">
                <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'><rect x='4' y='8' width='40' height='32' rx='4' fill='%23300a24'/><text x='12' y='30' fill='%234ce94c' font-size='16'>$_</text></svg>">
                <span>Terminal</span>
            </div>
            <div class="desktop-icon" data-app="store" style="top: 220px; left: 20px;">
                <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'><rect x='4' y='4' width='40' height='40' rx='4' fill='%23107c10'/><text x='24' y='32' text-anchor='middle' fill='white' font-size='24'>üõí</text></svg>">
                <span>Store</span>
            </div>
            <div class="desktop-icon" data-app="notepad" style="top: 220px; left: 110px;">
                <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'><rect x='8' y='4' width='32' height='40' rx='2' fill='%232196f3'/><rect x='12' y='10' width='24' height='2' fill='white'/><rect x='12' y='16' width='24' height='2' fill='white'/><rect x='12' y='22' width='18' height='2' fill='white'/></svg>">
                <span>–ë–ª–æ–∫–Ω–æ—Ç</span>
            </div>
        </div>
    </div>

    <!-- Taskbar -->
    <div id="taskbar">
        <div id="start-btn">
            <svg viewBox="0 0 88 88"><path d="M0 0h42v42H0zM46 0h42v42H46zM0 46h42v42H0zM46 46h42v42H46z"/></svg>
        </div>
        <input type="text" id="search-box" placeholder="üîç –í–≤–µ–¥–∏—Ç–µ –∑–¥–µ—Å—å —Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞">
        <div id="taskbar-apps"></div>
        <div id="system-tray">
            <div class="tray-icon" id="wifi-icon">üì∂</div>
            <div class="tray-icon" id="volume-icon">üîä</div>
            <div class="tray-icon" id="battery-icon">üîã</div>
            <div id="clock">
                <div id="clock-time">12:00</div>
                <div id="clock-date">01.01.2024</div>
            </div>
            <div id="notification-btn">üí¨</div>
        </div>
    </div>

    <!-- Start Menu -->
    <div id="start-menu">
        <div id="start-left">
            <div class="start-left-btn" title="–ú–µ–Ω—é">‚ò∞</div>
            <div class="start-left-btn" id="user-btn" title="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å">üë§</div>
            <div class="start-left-btn" title="–î–æ–∫—É–º–µ–Ω—Ç—ã" data-app="explorer">üìÅ</div>
            <div class="start-left-btn" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏" data-app="settings">‚öôÔ∏è</div>
            <div class="start-left-btn" id="power-btn" title="–ü–∏—Ç–∞–Ω–∏–µ">‚èª</div>
        </div>
        <div id="start-right">
            <h3 style="color: white; margin-bottom: 16px; font-weight: 400;">–í—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h3>
            <div id="start-tiles">
                <div class="start-tile" style="background:#0078d4" data-app="browser"><span>üåê Edge</span></div>
                <div class="start-tile" style="background:#0078d4" data-app="mail"><span>üìß –ü–æ—á—Ç–∞</span></div>
                <div class="start-tile" style="background:#0078d4" data-app="calendar"><span>üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å</span></div>
                <div class="start-tile tile-wide" style="background:#8764b8" data-app="photos"><span>üñºÔ∏è –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</span></div>
                <div class="start-tile" style="background:#107c10" data-app="store"><span>üõí Microsoft Store</span></div>
                <div class="start-tile tile-wide" style="background:linear-gradient(135deg, #00b4db, #0083b0)" data-app="weather"><span>‚òÄÔ∏è –ü–æ–≥–æ–¥–∞ 22¬∞C</span></div>
                <div class="start-tile" style="background:#555" data-app="settings"><span>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</span></div>
                <div class="start-tile" style="background:#333" data-app="calculator"><span>üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</span></div>
                <div class="start-tile" style="background:#5b9bd5" data-app="notepad"><span>üìù –ë–ª–æ–∫–Ω–æ—Ç</span></div>
                <div class="start-tile" style="background:#9b59b6" data-app="paint"><span>üé® Paint</span></div>
                <div class="start-tile" style="background:#300a24" data-app="terminal"><span>üíª Terminal</span></div>
                <div class="start-tile" style="background:#e74c3c" data-app="game"><span>üéÆ –ò–≥—Ä–∞</span></div>
            </div>
            <div id="installed-apps-section" style="display:none;">
                <h4 style="color: #888; font-weight: 400;">–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h4>
                <div id="installed-apps-grid"></div>
            </div>
        </div>
    </div>

    <!-- Context Menu -->
    <div id="context-menu">
        <div class="context-item" data-action="refresh">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</div>
        <div class="context-separator"></div>
        <div class="context-item" data-action="terminal">üíª –û—Ç–∫—Ä—ã—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª</div>
        <div class="context-item" data-action="personalize">üé® –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è</div>
    </div>

    <!-- Calendar Popup -->
    <div id="calendar-popup">
        <div class="calendar-header">
            <button onclick="changeMonth(-1)" style="background:none;border:none;color:white;cursor:pointer;font-size:18px;">‚óÄ</button>
            <span id="calendar-month" style="color:white;font-size:16px;">–Ø–Ω–≤–∞—Ä—å 2024</span>
            <button onclick="changeMonth(1)" style="background:none;border:none;color:white;cursor:pointer;font-size:18px;">‚ñ∂</button>
        </div>
        <div class="calendar-grid" id="calendar-grid"></div>
    </div>

    <!-- Notification Center -->
    <div id="notification-center">
        <h3 style="margin-bottom:16px;">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
        <div id="notifications-list">
            <div class="notification-item">
                <h4>Windows Update</h4>
                <p>–î–æ—Å—Ç—É–ø–Ω—ã –Ω–æ–≤—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</p>
            </div>
        </div>
        <h3 style="margin:16px 0;">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
        <div class="quick-actions">
            <div class="quick-action active" onclick="this.classList.toggle('active')">üì∂<br>Wi-Fi</div>
            <div class="quick-action active" onclick="this.classList.toggle('active')">üîµ<br>Bluetooth</div>
            <div class="quick-action" onclick="this.classList.toggle('active')">‚úàÔ∏è<br>–†–µ–∂–∏–º –ø–æ–ª—ë—Ç–∞</div>
            <div class="quick-action" onclick="this.classList.toggle('active')">üîã<br>–≠–∫–æ–Ω–æ–º–∏—è</div>
        </div>
    </div>

    <!-- Volume Popup -->
    <div id="volume-popup">
        <div style="margin-bottom:12px;">üîä –ì—Ä–æ–º–∫–æ—Å—Ç—å</div>
        <input type="range" style="width:200px" value="70" id="volume-slider">
        <div style="color:#888;font-size:12px;margin-top:8px;text-align:center;" id="volume-value">70%</div>
    </div>

    <!-- Windows Container -->
    <div id="windows-container"></div>

    <script>
        // Prevent all scrolling
        document.addEventListener('scroll', e => e.preventDefault(), { passive: false });
        document.addEventListener('touchmove', e => {
            if (!e.target.closest('.window-body') && !e.target.closest('.explorer-content') && 
                !e.target.closest('.linux-terminal') && !e.target.closest('#start-right') &&
                !e.target.closest('#notification-center') && !e.target.closest('.store-grid') &&
                !e.target.closest('textarea') && !e.target.closest('input')) {
                e.preventDefault();
            }
        }, { passive: false });

        // Store apps data
        const storeApps = [
            { id: 'vscode', name: 'VS Code', icon: 'üíª', rating: '4.8', desc: '–†–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–¥–∞', category: 'dev' },
            { id: 'spotify', name: 'Spotify', icon: 'üéµ', rating: '4.5', desc: '–ú—É–∑—ã–∫–∞', category: 'entertainment' },
            { id: 'telegram', name: 'Telegram', icon: 'üí¨', rating: '4.7', desc: '–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä', category: 'social' },
            { id: 'discord', name: 'Discord', icon: 'üéÆ', rating: '4.6', desc: '–ì–æ–ª–æ—Å–æ–≤–æ–π —á–∞—Ç', category: 'social' },
            { id: 'netflix', name: 'Netflix', icon: 'üì∫', rating: '4.4', desc: '–°—Ç—Ä–∏–º–∏–Ω–≥', category: 'entertainment' },
            { id: 'vlc', name: 'VLC', icon: 'üé¨', rating: '4.7', desc: '–ú–µ–¥–∏–∞–ø–ª–µ–µ—Ä', category: 'entertainment' },
            { id: 'gimp', name: 'GIMP', icon: 'üé®', rating: '4.3', desc: '–ì—Ä–∞—Ñ–∏–∫–∞', category: 'creative' },
            { id: 'blender', name: 'Blender', icon: 'üßä', rating: '4.8', desc: '3D', category: 'creative' },
            { id: 'firefox', name: 'Firefox', icon: 'ü¶ä', rating: '4.5', desc: '–ë—Ä–∞—É–∑–µ—Ä', category: 'utilities' },
            { id: 'winrar', name: 'WinRAR', icon: 'üì¶', rating: '4.2', desc: '–ê—Ä—Ö–∏–≤–∞—Ç–æ—Ä', category: 'utilities' },
            { id: 'nodejs', name: 'Node.js', icon: 'üíö', rating: '4.8', desc: 'JS Runtime', category: 'dev' },
            { id: 'python', name: 'Python', icon: 'üêç', rating: '4.9', desc: '–Ø–∑—ã–∫', category: 'dev' },
            { id: 'zoom', name: 'Zoom', icon: 'üìπ', rating: '4.3', desc: '–í–∏–¥–µ–æ', category: 'social' },
            { id: 'slack', name: 'Slack', icon: 'üíº', rating: '4.4', desc: '–ß–∞—Ç', category: 'social' },
            { id: 'obs', name: 'OBS Studio', icon: 'üì°', rating: '4.8', desc: '–°—Ç—Ä–∏–º–∏–Ω–≥', category: 'creative' },
            { id: 'chrome', name: 'Chrome', icon: 'üåê', rating: '4.6', desc: '–ë—Ä–∞—É–∑–µ—Ä', category: 'utilities' }
        ];
        const installedApps = {};

        // App configurations
        const apps = {
            explorer: { title: '–ü—Ä–æ–≤–æ–¥–Ω–∏–∫', icon: 'üìÅ', width: 900, height: 550 },
            notepad: { title: '–ë–ª–æ–∫–Ω–æ—Ç', icon: 'üìù', width: 600, height: 400 },
            calculator: { title: '–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä', icon: 'üßÆ', width: 320, height: 500 },
            browser: { title: 'Microsoft Edge', icon: 'üåê', width: 1000, height: 700 },
            settings: { title: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏', icon: '‚öôÔ∏è', width: 900, height: 600 },
            paint: { title: 'Paint', icon: 'üé®', width: 800, height: 600 },
            terminal: { title: 'Linux Terminal', icon: 'üíª', width: 750, height: 500 },
            taskmanager: { title: '–î–∏—Å–ø–µ—Ç—á–µ—Ä –∑–∞–¥–∞—á', icon: 'üìä', width: 700, height: 500 },
            music: { title: '–ú—É–∑—ã–∫–∞', icon: 'üéµ', width: 400, height: 500 },
            game: { title: '–ó–º–µ–π–∫–∞', icon: 'üéÆ', width: 420, height: 520 },
            photos: { title: '–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏', icon: 'üñºÔ∏è', width: 800, height: 600 },
            mail: { title: '–ü–æ—á—Ç–∞', icon: 'üìß', width: 900, height: 600 },
            store: { title: 'Microsoft Store', icon: 'üõí', width: 950, height: 650 },
            weather: { title: '–ü–æ–≥–æ–¥–∞', icon: '‚òÄÔ∏è', width: 500, height: 500 },
            sticky: { title: '–ó–∞–ø–∏—Å–∫–∏', icon: 'üìå', width: 300, height: 300 },
            calendar: { title: '–ö–∞–ª–µ–Ω–¥–∞—Ä—å', icon: 'üìÖ', width: 400, height: 450 },
            recycle: { title: '–ö–æ—Ä–∑–∏–Ω–∞', icon: 'üóëÔ∏è', width: 600, height: 400 }
        };

        let openWindows = {};
        let zIndex = 100;
        let calcDisplay = '0';
        let calcOperator = null;
        let calcPrevValue = null;
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();
        let gameInterval = null;
        let desktopIconCount = 6;

        // Terminal state
        let terminalCwd = '/home/user';
        let terminalHistory = [];
        let historyIndex = -1;
        const fileSystem = {
            '/': { type: 'dir', children: ['home', 'usr', 'etc', 'var', 'tmp'] },
            '/home': { type: 'dir', children: ['user'] },
            '/home/user': { type: 'dir', children: ['Documents', 'Downloads', 'Pictures', 'Desktop'] },
            '/home/user/Documents': { type: 'dir', children: ['project'] },
            '/home/user/Documents/project': { type: 'dir', children: ['index.html', 'app.js'] },
            '/home/user/Downloads': { type: 'dir', children: [] },
            '/home/user/Pictures': { type: 'dir', children: [] },
            '/home/user/Desktop': { type: 'dir', children: [] },
            '/usr': { type: 'dir', children: ['bin', 'local'] },
            '/usr/bin': { type: 'dir', children: ['node', 'npm', 'git'] },
            '/usr/local': { type: 'dir', children: ['bin'] },
            '/usr/local/bin': { type: 'dir', children: [] },
            '/etc': { type: 'dir', children: [] },
            '/var': { type: 'dir', children: [] },
            '/tmp': { type: 'dir', children: [] }
        };
        const installedPackages = {};
        const globalPackages = {};

        // Lockscreen
        const lockscreen = document.getElementById('lockscreen');
        lockscreen.addEventListener('click', () => {
            lockscreen.classList.add('unlock');
            setTimeout(() => lockscreen.style.display = 'none', 500);
        });

        function updateLockscreenTime() {
            const now = new Date();
            document.getElementById('lockscreen-time').textContent = now.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });
            document.getElementById('lockscreen-date').textContent = now.toLocaleDateString('ru-RU', { weekday: 'long', day: 'numeric', month: 'long' });
        }
        updateLockscreenTime();
        setInterval(updateLockscreenTime, 1000);

        // Clock
        function updateClock() {
            const now = new Date();
            document.getElementById('clock-time').textContent = now.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });
            document.getElementById('clock-date').textContent = now.toLocaleDateString('ru-RU');
        }
        updateClock();
        setInterval(updateClock, 1000);

        // Start Menu
        document.getElementById('start-btn').addEventListener('click', (e) => {
            e.stopPropagation();
            document.getElementById('start-menu').classList.toggle('show');
            closePopups('start');
        });

        document.querySelectorAll('.start-tile, .start-left-btn[data-app]').forEach(el => {
            el.addEventListener('click', () => {
                const app = el.dataset.app;
                if (app && apps[app]) {
                    openApp(app);
                    document.getElementById('start-menu').classList.remove('show');
                }
            });
        });

        // Desktop Icons
        function initDesktopIcons() {
            document.querySelectorAll('.desktop-icon').forEach(icon => {
                setupDesktopIcon(icon);
            });
        }

        function setupDesktopIcon(icon) {
            let lastTap = 0;
            let isDragging = false, startX, startY, offsetX, offsetY;

            icon.addEventListener('dblclick', () => {
                const app = icon.dataset.app;
                if (app && apps[app]) openApp(app);
            });
            
            icon.addEventListener('touchend', (e) => {
                if (isDragging) { isDragging = false; return; }
                const now = Date.now();
                if (now - lastTap < 300) {
                    const app = icon.dataset.app;
                    if (app && apps[app]) openApp(app);
                }
                lastTap = now;
            });

            icon.addEventListener('click', (e) => {
                document.querySelectorAll('.desktop-icon').forEach(i => i.classList.remove('selected'));
                icon.classList.add('selected');
            });

            // Dragging
            icon.addEventListener('mousedown', (e) => {
                if (e.button !== 0) return;
                isDragging = true;
                offsetX = e.clientX - icon.offsetLeft;
                offsetY = e.clientY - icon.offsetTop;
            });

            icon.addEventListener('touchstart', (e) => {
                const touch = e.touches[0];
                startX = touch.clientX;
                startY = touch.clientY;
                offsetX = touch.clientX - icon.offsetLeft;
                offsetY = touch.clientY - icon.offsetTop;
            }, { passive: true });

            icon.addEventListener('touchmove', (e) => {
                const touch = e.touches[0];
                if (Math.abs(touch.clientX - startX) > 10 || Math.abs(touch.clientY - startY) > 10) {
                    isDragging = true;
                    icon.style.left = Math.max(0, touch.clientX - offsetX) + 'px';
                    icon.style.top = Math.max(0, touch.clientY - offsetY) + 'px';
                }
            }, { passive: true });
        }

        document.addEventListener('mousemove', (e) => {
            document.querySelectorAll('.desktop-icon').forEach(icon => {
                if (icon.isDragging) {
                    icon.style.left = Math.max(0, e.clientX - icon.offsetX) + 'px';
                    icon.style.top = Math.max(0, e.clientY - icon.offsetY) + 'px';
                }
            });
        });
        document.addEventListener('mouseup', () => {
            document.querySelectorAll('.desktop-icon').forEach(icon => icon.isDragging = false);
        });

        initDesktopIcons();

        // Context Menu
        document.getElementById('desktop').addEventListener('contextmenu', (e) => {
            e.preventDefault();
            const menu = document.getElementById('context-menu');
            menu.style.display = 'block';
            menu.style.left = Math.min(e.clientX, window.innerWidth - 220) + 'px';
            menu.style.top = Math.min(e.clientY, window.innerHeight - 150) + 'px';
        });

        document.querySelectorAll('.context-item').forEach(item => {
            item.addEventListener('click', () => {
                const action = item.dataset.action;
                if (action === 'personalize') openApp('settings');
                else if (action === 'refresh') location.reload();
                else if (action === 'terminal') openApp('terminal');
                document.getElementById('context-menu').style.display = 'none';
            });
        });

        // Close menus
        document.addEventListener('click', (e) => {
            if (!e.target.closest('#start-menu') && !e.target.closest('#start-btn')) {
                document.getElementById('start-menu').classList.remove('show');
            }
            if (!e.target.closest('#context-menu')) {
                document.getElementById('context-menu').style.display = 'none';
            }
            if (!e.target.closest('#calendar-popup') && !e.target.closest('#clock')) {
                document.getElementById('calendar-popup').classList.remove('show');
            }
            if (!e.target.closest('#notification-center') && !e.target.closest('#notification-btn')) {
                document.getElementById('notification-center').classList.remove('show');
            }
            if (!e.target.closest('#volume-popup') && !e.target.closest('#volume-icon')) {
                document.getElementById('volume-popup').classList.remove('show');
            }
            document.querySelectorAll('.desktop-icon').forEach(i => i.classList.remove('selected'));
        });

        // Calendar
        document.getElementById('clock').addEventListener('click', (e) => {
            e.stopPropagation();
            closePopups('calendar');
            document.getElementById('calendar-popup').classList.toggle('show');
            renderCalendar();
        });

        function renderCalendar() {
            const grid = document.getElementById('calendar-grid');
            const monthNames = ['–Ø–Ω–≤–∞—Ä—å', '–§–µ–≤—Ä–∞–ª—å', '–ú–∞—Ä—Ç', '–ê–ø—Ä–µ–ª—å', '–ú–∞–π', '–ò—é–Ω—å', '–ò—é–ª—å', '–ê–≤–≥—É—Å—Ç', '–°–µ–Ω—Ç—è–±—Ä—å', '–û–∫—Ç—è–±—Ä—å', '–ù–æ—è–±—Ä—å', '–î–µ–∫–∞–±—Ä—å'];
            document.getElementById('calendar-month').textContent = `${monthNames[currentMonth]} ${currentYear}`;
            grid.innerHTML = '';
            ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–í—Å'].forEach(d => grid.innerHTML += `<div class="calendar-day header">${d}</div>`);
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            const today = new Date();
            for (let i = 0; i < (firstDay === 0 ? 6 : firstDay - 1); i++) grid.innerHTML += '<div class="calendar-day"></div>';
            for (let d = 1; d <= daysInMonth; d++) {
                const isToday = d === today.getDate() && currentMonth === today.getMonth() && currentYear === today.getFullYear();
                grid.innerHTML += `<div class="calendar-day${isToday ? ' today' : ''}">${d}</div>`;
            }
        }

        function changeMonth(delta) {
            currentMonth += delta;
            if (currentMonth > 11) { currentMonth = 0; currentYear++; }
            if (currentMonth < 0) { currentMonth = 11; currentYear--; }
            renderCalendar();
        }

        // Notifications & Volume
        document.getElementById('notification-btn').addEventListener('click', (e) => {
            e.stopPropagation();
            closePopups('notification');
            document.getElementById('notification-center').classList.toggle('show');
        });

        document.getElementById('volume-icon').addEventListener('click', (e) => {
            e.stopPropagation();
            closePopups('volume');
            document.getElementById('volume-popup').classList.toggle('show');
        });

        document.getElementById('volume-slider').addEventListener('input', (e) => {
            document.getElementById('volume-value').textContent = e.target.value + '%';
        });

        function closePopups(except) {
            if (except !== 'calendar') document.getElementById('calendar-popup').classList.remove('show');
            if (except !== 'notification') document.getElementById('notification-center').classList.remove('show');
            if (except !== 'volume') document.getElementById('volume-popup').classList.remove('show');
            if (except !== 'start') document.getElementById('start-menu').classList.remove('show');
        }

        // Open App
        function openApp(appId) {
            if (openWindows[appId]) {
                const win = openWindows[appId];
                win.style.display = 'block';
                bringToFront(win);
                return;
            }

            const app = apps[appId];
            if (!app) return;

            const win = document.createElement('div');
            win.className = 'window show';
            win.id = 'win-' + appId;
            win.style.width = Math.min(app.width, window.innerWidth - 50) + 'px';
            win.style.height = Math.min(app.height, window.innerHeight - 90) + 'px';
            win.style.left = (50 + Object.keys(openWindows).length * 30) + 'px';
            win.style.top = (30 + Object.keys(openWindows).length * 30) + 'px';
            win.style.zIndex = ++zIndex;

            win.innerHTML = `
                <div class="window-header">
                    <div class="window-title">${app.icon} ${app.title}</div>
                    <div class="window-controls">
                        <div class="win-ctrl minimize" onclick="minimizeWindow('${appId}')"><svg viewBox="0 0 10 10"><line x1="0" y1="5" x2="10" y2="5" stroke="white" stroke-width="1"/></svg></div>
                        <div class="win-ctrl maximize" onclick="maximizeWindow('${appId}')"><svg viewBox="0 0 10 10"><rect x="0" y="0" width="10" height="10" fill="none" stroke="white" stroke-width="1"/></svg></div>
                        <div class="win-ctrl close" onclick="closeWindow('${appId}')"><svg viewBox="0 0 10 10"><line x1="0" y1="0" x2="10" y2="10" stroke="white" stroke-width="1"/><line x1="10" y1="0" x2="0" y2="10" stroke="white" stroke-width="1"/></svg></div>
                    </div>
                </div>
                <div class="window-body">${getAppContent(appId)}</div>
                <div class="resize-handle"></div>
            `;

            document.getElementById('windows-container').appendChild(win);
            openWindows[appId] = win;
            makeWindowDraggable(win);
            makeWindowResizable(win);
            updateTaskbar();
            bringToFront(win);

            // Initialize apps
            if (appId === 'terminal') initLinuxTerminal(win);
            if (appId === 'paint') initPaint(win);
            if (appId === 'game') initGame(win);
            if (appId === 'store') initStore(win);
            if (appId === 'browser') initBrowser(win);
            if (appId === 'explorer') initExplorer(win, appId);
        }

        function getAppContent(appId) {
            switch(appId) {
                case 'explorer':
                    return `
                        <div style="display:flex;height:100%;flex-direction:column">
                            <div class="explorer-toolbar">
                                <button class="paint-btn" onclick="explorerBack('explorer')">‚Üê</button>
                                <button class="paint-btn" onclick="explorerUp('explorer')">‚Üë</button>
                                <input type="text" class="explorer-path" id="explorer-path-explorer" value="C:\\Users\\User" readonly>
                            </div>
                            <div style="display:flex;flex:1;overflow:hidden">
                                <div class="explorer-sidebar" id="explorer-sidebar-explorer">
                                    <div class="explorer-item" data-path="C:\\">üíª –≠—Ç–æ—Ç –∫–æ–º–ø—å—é—Ç–µ—Ä</div>
                                    <div class="explorer-item" data-path="C:\\Users\\User\\Desktop">üñ•Ô∏è –†–∞–±–æ—á–∏–π —Å—Ç–æ–ª</div>
                                    <div class="explorer-item" data-path="C:\\Users\\User\\Documents">üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã</div>
                                    <div class="explorer-item" data-path="C:\\Users\\User\\Downloads">üì• –ó–∞–≥—Ä—É–∑–∫–∏</div>
                                    <div class="explorer-item" data-path="C:\\Users\\User\\Pictures">üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
                                </div>
                                <div class="explorer-content" id="explorer-content-explorer"></div>
                            </div>
                        </div>`;
                case 'terminal':
                    return `<div class="linux-terminal" id="linux-terminal"></div>`;
                case 'store':
                    return `
                        <div class="store-header">
                            <h2>Microsoft Store</h2>
                            <p>–û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è –Ω–æ–≤—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</p>
                        </div>
                        <div class="store-tabs">
                            <div class="store-tab active" data-cat="all">–í—Å–µ</div>
                            <div class="store-tab" data-cat="dev">–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞</div>
                            <div class="store-tab" data-cat="entertainment">–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</div>
                            <div class="store-tab" data-cat="social">–û–±—â–µ–Ω–∏–µ</div>
                            <div class="store-tab" data-cat="utilities">–£—Ç–∏–ª–∏—Ç—ã</div>
                            <div class="store-tab" data-cat="creative">–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ</div>
                        </div>
                        <div class="store-grid" id="store-grid"></div>`;
                case 'notepad':
                    return `<div class="notepad-menu"><span>–§–∞–π–ª</span><span>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</span><span>–§–æ—Ä–º–∞—Ç</span></div><textarea class="notepad-textarea" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç..."></textarea>`;
                case 'calculator':
                    return `
                        <div class="calc-display" id="calc-display">0</div>
                        <div class="calc-buttons">
                            <button class="calc-btn clear" onclick="calcClear()">C</button>
                            <button class="calc-btn" onclick="calcInput('¬±')">¬±</button>
                            <button class="calc-btn" onclick="calcInput('%')">%</button>
                            <button class="calc-btn operator" onclick="calcOp('/')">√∑</button>
                            <button class="calc-btn" onclick="calcInput('7')">7</button>
                            <button class="calc-btn" onclick="calcInput('8')">8</button>
                            <button class="calc-btn" onclick="calcInput('9')">9</button>
                            <button class="calc-btn operator" onclick="calcOp('*')">√ó</button>
                            <button class="calc-btn" onclick="calcInput('4')">4</button>
                            <button class="calc-btn" onclick="calcInput('5')">5</button>
                            <button class="calc-btn" onclick="calcInput('6')">6</button>
                            <button class="calc-btn operator" onclick="calcOp('-')">‚àí</button>
                            <button class="calc-btn" onclick="calcInput('1')">1</button>
                            <button class="calc-btn" onclick="calcInput('2')">2</button>
                            <button class="calc-btn" onclick="calcInput('3')">3</button>
                            <button class="calc-btn operator" onclick="calcOp('+')">+</button>
                            <button class="calc-btn" onclick="calcInput('0')" style="grid-column:span 2">0</button>
                            <button class="calc-btn" onclick="calcInput('.')">.</button>
                            <button class="calc-btn equals" onclick="calcEquals()">=</button>
                        </div>`;
                case 'browser':
                    return `
                        <div class="browser-toolbar">
                            <button class="browser-nav-btn" id="browser-back" disabled>‚Üê</button>
                            <button class="browser-nav-btn" id="browser-forward" disabled>‚Üí</button>
                            <button class="browser-nav-btn" id="browser-refresh">üîÑ</button>
                            <button class="browser-nav-btn" id="browser-home-btn">üè†</button>
                            <input type="text" class="browser-url" id="browser-url" value="https://www.google.com">
                            <button class="browser-nav-btn" id="browser-go">‚Üí</button>
                        </div>
                        <div class="browser-content" id="browser-content"></div>`;
                case 'settings':
                    return `
                        <div style="display:flex;height:100%">
                            <div class="settings-sidebar">
                                <h2 style="margin-bottom:20px;font-weight:300">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã</h2>
                                <div class="settings-item active">üñ•Ô∏è –°–∏—Å—Ç–µ–º–∞</div>
                                <div class="settings-item">üì± –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</div>
                                <div class="settings-item">üé® –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è</div>
                                <div class="settings-item">üì¶ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è</div>
                            </div>
                            <div class="settings-content">
                                <h2 style="font-weight:300;margin-bottom:30px">–°–∏—Å—Ç–µ–º–∞</h2>
                                <div class="setting-row"><span>–ù–æ—á–Ω–æ–π —Å–≤–µ—Ç</span><div class="toggle" onclick="this.classList.toggle('on')"></div></div>
                                <div class="setting-row"><span>–ì—Ä–æ–º–∫–æ—Å—Ç—å</span><input type="range" value="70"></div>
                            </div>
                        </div>`;
                case 'paint':
                    return `
                        <div class="paint-toolbar">
                            <input type="color" class="color-picker" id="paint-color" value="#000000">
                            <button class="paint-btn" onclick="setBrushSize(2)">–¢–æ–Ω–∫–∏–π</button>
                            <button class="paint-btn" onclick="setBrushSize(5)">–°—Ä–µ–¥–Ω–∏–π</button>
                            <button class="paint-btn" onclick="setBrushSize(10)">–¢–æ–ª—Å—Ç—ã–π</button>
                            <button class="paint-btn" onclick="setEraser()">–õ–∞—Å—Ç–∏–∫</button>
                            <button class="paint-btn" onclick="clearCanvas()">–û—á–∏—Å—Ç–∏—Ç—å</button>
                        </div>
                        <canvas id="paint-canvas" width="780" height="520"></canvas>`;
                case 'music':
                    return `
                        <div style="padding:20px">
                            <div class="player-cover">üéµ</div>
                            <div style="text-align:center;margin:20px 0"><h3>–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–µ–∫–∞</h3><p style="color:#888">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</p></div>
                            <div class="progress-bar"><div class="progress-fill"></div></div>
                            <div class="player-controls">
                                <button class="player-btn">‚èÆ</button>
                                <button class="player-btn play">‚ñ∂</button>
                                <button class="player-btn">‚è≠</button>
                            </div>
                        </div>`;
                case 'game':
                    return `
                        <div class="game-score">–°—á—ë—Ç: <span id="game-score">0</span></div>
                        <canvas id="game-canvas" width="400" height="400"></canvas>
                        <div class="game-controls">–°—Ç—Ä–µ–ª–∫–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –ü—Ä–æ–±–µ–ª –¥–ª—è —Å—Ç–∞—Ä—Ç–∞.</div>`;
                case 'photos':
                    return `<div class="photo-viewer"><img src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800" alt="Photo"></div>`;
                case 'mail':
                    return `
                        <div style="display:flex;height:100%">
                            <div class="mail-sidebar">
                                <div class="mail-folder" style="background:rgba(255,255,255,0.1)">üì• –í—Ö–æ–¥—è—â–∏–µ</div>
                                <div class="mail-folder">üì§ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ</div>
                            </div>
                            <div class="mail-list">
                                <div class="mail-item"><strong>Microsoft</strong><br><small>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</small></div>
                            </div>
                            <div class="mail-preview"><h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2><p style="margin-top:16px">–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Windows 10.</p></div>
                        </div>`;
                case 'weather':
                    return `
                        <div class="weather-main">
                            <h2>–ú–æ—Å–∫–≤–∞</h2>
                            <div class="weather-icon">‚òÄÔ∏è</div>
                            <div class="weather-temp">22¬∞</div>
                            <p>–Ø—Å–Ω–æ</p>
                            <div class="weather-details">
                                <div><strong>üí®</strong><br>5 –º/—Å</div>
                                <div><strong>üíß</strong><br>45%</div>
                            </div>
                        </div>`;
                case 'sticky':
                    return `
                        <div class="sticky-note" id="sticky-note">
                            <div class="sticky-colors">
                                <div class="sticky-color" style="background:#fff59d" onclick="changeStickyColor('#fff59d')"></div>
                                <div class="sticky-color" style="background:#80deea" onclick="changeStickyColor('#80deea')"></div>
                                <div class="sticky-color" style="background:#f48fb1" onclick="changeStickyColor('#f48fb1')"></div>
                            </div>
                            <textarea placeholder="–ó–∞–º–µ—Ç–∫–∞..."></textarea>
                        </div>`;
                case 'taskmanager':
                    return `
                        <div class="taskmanager-tabs"><div class="taskmanager-tab active">–ü—Ä–æ—Ü–µ—Å—Å—ã</div></div>
                        <div class="process-list">
                            <div class="process-item process-header"><span>–ò–º—è</span><span>–¶–ü</span><span>–ü–∞–º—è—Ç—å</span><span>–î–∏—Å–∫</span></div>
                            <div class="process-item"><span>üåê Edge</span><span>5%</span><span>320 –ú–ë</span><span>0.1 –ú–ë/—Å</span></div>
                            <div class="process-item"><span>üìÅ –ü—Ä–æ–≤–æ–¥–Ω–∏–∫</span><span>2%</span><span>85 –ú–ë</span><span>0 –ú–ë/—Å</span></div>
                        </div>`;
                case 'recycle':
                    return `<div style="display:flex;height:100%;align-items:center;justify-content:center;flex-direction:column;color:#888"><div style="font-size:64px">üóëÔ∏è</div><p style="margin-top:20px">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p></div>`;
                // Store Apps with full content
                case 'vscode':
                    return `
                        <div style="display:flex;height:100%">
                            <div style="width:50px;background:#333;display:flex;flex-direction:column;align-items:center;padding:8px 0;gap:16px">
                                <div style="font-size:24px;opacity:0.8">üìÑ</div>
                                <div style="font-size:24px;opacity:0.8">üîç</div>
                                <div style="font-size:24px;opacity:0.8">üìÇ</div>
                                <div style="font-size:24px;opacity:0.8">üîÄ</div>
                                <div style="font-size:24px;opacity:0.8">üêõ</div>
                                <div style="font-size:24px;opacity:0.8">üß©</div>
                            </div>
                            <div style="width:200px;background:#252526;padding:8px;font-size:12px">
                                <div style="color:#888;margin-bottom:8px">EXPLORER</div>
                                <div style="color:#ccc;padding:4px;cursor:pointer">üìÅ project</div>
                                <div style="color:#ccc;padding:4px 4px 4px 20px;cursor:pointer">üìÑ index.html</div>
                                <div style="color:#ccc;padding:4px 4px 4px 20px;cursor:pointer;background:#094771">üìÑ app.js</div>
                                <div style="color:#ccc;padding:4px 4px 4px 20px;cursor:pointer">üìÑ style.css</div>
                                <div style="color:#ccc;padding:4px 4px 4px 20px;cursor:pointer">üìÑ package.json</div>
                            </div>
                            <div style="flex:1;display:flex;flex-direction:column">
                                <div style="background:#2d2d2d;padding:8px;display:flex;gap:8px;font-size:12px">
                                    <span style="background:#1e1e1e;padding:4px 12px;border-radius:4px 4px 0 0">app.js ‚úï</span>
                                </div>
                                <div style="flex:1;background:#1e1e1e;padding:16px;font-family:monospace;font-size:13px;overflow:auto">
                                    <div><span style="color:#569cd6">const</span> <span style="color:#4fc1ff">express</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'express'</span>);</div>
                                    <div><span style="color:#569cd6">const</span> <span style="color:#4fc1ff">app</span> = <span style="color:#4fc1ff">express</span>();</div>
                                    <div></div>
                                    <div><span style="color:#4fc1ff">app</span>.<span style="color:#dcdcaa">get</span>(<span style="color:#ce9178">'/'</span>, (<span style="color:#9cdcfe">req</span>, <span style="color:#9cdcfe">res</span>) => {</div>
                                    <div>  <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">send</span>(<span style="color:#ce9178">'Hello World!'</span>);</div>
                                    <div>});</div>
                                    <div></div>
                                    <div><span style="color:#4fc1ff">app</span>.<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">3000</span>);</div>
                                </div>
                                <div style="background:#007acc;color:white;padding:4px 8px;font-size:11px;display:flex;justify-content:space-between">
                                    <span>JavaScript</span><span>Ln 8, Col 1</span><span>UTF-8</span>
                                </div>
                            </div>
                        </div>`;
                case 'spotify':
                    return `
                        <div style="background:linear-gradient(180deg,#1db954 0%,#121212 30%);height:100%;padding:20px">
                            <div style="display:flex;gap:20px;margin-bottom:30px">
                                <div style="width:180px;height:180px;background:#282828;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:80px">üéµ</div>
                                <div style="display:flex;flex-direction:column;justify-content:flex-end">
                                    <span style="font-size:12px">–ü–õ–ï–ô–õ–ò–°–¢</span>
                                    <h1 style="font-size:48px;margin:8px 0">–ú–æ–π –ø–ª–µ–π–ª–∏—Å—Ç</h1>
                                    <span style="color:#b3b3b3">25 —Ç—Ä–µ–∫–æ–≤ ‚Ä¢ 1 —á 45 –º–∏–Ω</span>
                                </div>
                            </div>
                            <button style="background:#1db954;border:none;color:white;padding:14px 32px;border-radius:24px;font-size:16px;cursor:pointer;margin-bottom:20px">‚ñ∂ –°–ª—É—à–∞—Ç—å</button>
                            <div style="background:#181818;border-radius:8px;padding:8px">
                                <div style="display:flex;padding:12px;border-bottom:1px solid #282828;cursor:pointer" onmouseover="this.style.background='#282828'" onmouseout="this.style.background='transparent'">
                                    <span style="width:30px;color:#b3b3b3">1</span>
                                    <span style="flex:1">Bohemian Rhapsody</span>
                                    <span style="color:#b3b3b3">Queen</span>
                                    <span style="color:#b3b3b3;width:60px;text-align:right">5:55</span>
                                </div>
                                <div style="display:flex;padding:12px;border-bottom:1px solid #282828;cursor:pointer" onmouseover="this.style.background='#282828'" onmouseout="this.style.background='transparent'">
                                    <span style="width:30px;color:#b3b3b3">2</span>
                                    <span style="flex:1">Imagine</span>
                                    <span style="color:#b3b3b3">John Lennon</span>
                                    <span style="color:#b3b3b3;width:60px;text-align:right">3:04</span>
                                </div>
                                <div style="display:flex;padding:12px;cursor:pointer" onmouseover="this.style.background='#282828'" onmouseout="this.style.background='transparent'">
                                    <span style="width:30px;color:#b3b3b3">3</span>
                                    <span style="flex:1">Billie Jean</span>
                                    <span style="color:#b3b3b3">Michael Jackson</span>
                                    <span style="color:#b3b3b3;width:60px;text-align:right">4:54</span>
                                </div>
                            </div>
                        </div>`;
                case 'telegram':
                    return `
                        <div style="display:flex;height:100%">
                            <div style="width:280px;background:#17212b;border-right:1px solid #0e1621">
                                <div style="padding:12px;border-bottom:1px solid #0e1621"><input placeholder="–ü–æ–∏—Å–∫..." style="width:100%;background:#242f3d;border:none;padding:10px;border-radius:20px;color:white"></div>
                                <div style="padding:12px;display:flex;gap:12px;background:#2b5278;cursor:pointer">
                                    <div style="width:50px;height:50px;background:#5c9ce6;border-radius:50%;display:flex;align-items:center;justify-content:center">üë§</div>
                                    <div style="flex:1"><div style="font-weight:500">–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤</div><div style="color:#6c7883;font-size:13px">–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?</div></div>
                                    <div style="font-size:12px;color:#6c7883">12:45</div>
                                </div>
                                <div style="padding:12px;display:flex;gap:12px;cursor:pointer" onmouseover="this.style.background='#202b36'" onmouseout="this.style.background='transparent'">
                                    <div style="width:50px;height:50px;background:#e17076;border-radius:50%;display:flex;align-items:center;justify-content:center">üë•</div>
                                    <div style="flex:1"><div style="font-weight:500">–†–∞–±–æ—á–∏–π —á–∞—Ç</div><div style="color:#6c7883;font-size:13px">–ê–ª–µ–∫—Å–µ–π: –ì–æ—Ç–æ–≤–æ!</div></div>
                                    <div style="font-size:12px;color:#6c7883">11:30</div>
                                </div>
                            </div>
                            <div style="flex:1;display:flex;flex-direction:column;background:#0e1621">
                                <div style="padding:12px;background:#17212b;border-bottom:1px solid #0e1621;display:flex;align-items:center;gap:12px">
                                    <div style="width:40px;height:40px;background:#5c9ce6;border-radius:50%;display:flex;align-items:center;justify-content:center">üë§</div>
                                    <div><div style="font-weight:500">–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤</div><div style="color:#6c7883;font-size:12px">–±—ã–ª –≤ —Å–µ—Ç–∏ 5 –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥</div></div>
                                </div>
                                <div style="flex:1;padding:20px;overflow-y:auto">
                                    <div style="background:#17212b;padding:10px 14px;border-radius:12px;max-width:60%;margin-bottom:8px">–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?<div style="font-size:11px;color:#6c7883;text-align:right;margin-top:4px">12:45</div></div>
                                    <div style="background:#2b5278;padding:10px 14px;border-radius:12px;max-width:60%;margin-left:auto;margin-bottom:8px">–ü—Ä–∏–≤–µ—Ç! –í—Å—ë –æ—Ç–ª–∏—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ!<div style="font-size:11px;color:#6c7883;text-align:right;margin-top:4px">12:46 ‚úì‚úì</div></div>
                                </div>
                                <div style="padding:12px;background:#17212b;display:flex;gap:12px;align-items:center">
                                    <span style="font-size:20px;cursor:pointer">üìé</span>
                                    <input placeholder="–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ..." style="flex:1;background:#242f3d;border:none;padding:10px;border-radius:20px;color:white">
                                    <span style="font-size:20px;cursor:pointer">üé§</span>
                                </div>
                            </div>
                        </div>`;
                case 'discord':
                    return `
                        <div style="display:flex;height:100%">
                            <div style="width:72px;background:#202225;display:flex;flex-direction:column;align-items:center;padding:12px 0;gap:8px">
                                <div style="width:48px;height:48px;background:#5865f2;border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:20px;cursor:pointer">üè†</div>
                                <div style="width:32px;height:2px;background:#36393f;margin:4px 0"></div>
                                <div style="width:48px;height:48px;background:#36393f;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer" onmouseover="this.style.borderRadius='16px';this.style.background='#5865f2'" onmouseout="this.style.borderRadius='50%';this.style.background='#36393f'">üéÆ</div>
                                <div style="width:48px;height:48px;background:#36393f;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer" onmouseover="this.style.borderRadius='16px';this.style.background='#3ba55c'" onmouseout="this.style.borderRadius='50%';this.style.background='#36393f'">‚ûï</div>
                            </div>
                            <div style="width:240px;background:#2f3136">
                                <div style="padding:16px;font-weight:600;border-bottom:1px solid #202225">Gaming Server</div>
                                <div style="padding:8px"><div style="color:#8e9297;font-size:12px;padding:8px">–¢–ï–ö–°–¢–û–í–´–ï –ö–ê–ù–ê–õ–´</div>
                                    <div style="padding:8px;background:#393c43;border-radius:4px;cursor:pointer"># –æ–±—â–∏–π</div>
                                    <div style="padding:8px;cursor:pointer" onmouseover="this.style.background='#393c43'" onmouseout="this.style.background='transparent'"># –º–µ–º—ã</div>
                                </div>
                                <div style="padding:8px"><div style="color:#8e9297;font-size:12px;padding:8px">–ì–û–õ–û–°–û–í–´–ï –ö–ê–ù–ê–õ–´</div>
                                    <div style="padding:8px;cursor:pointer" onmouseover="this.style.background='#393c43'" onmouseout="this.style.background='transparent'">üîä –ì–æ–ª–æ—Å–æ–≤–æ–π —á–∞—Ç</div>
                                </div>
                            </div>
                            <div style="flex:1;background:#36393f;display:flex;flex-direction:column">
                                <div style="padding:16px;border-bottom:1px solid #202225"># –æ–±—â–∏–π</div>
                                <div style="flex:1;padding:16px;overflow-y:auto">
                                    <div style="display:flex;gap:16px;margin-bottom:16px">
                                        <div style="width:40px;height:40px;background:#5865f2;border-radius:50%"></div>
                                        <div><div><span style="font-weight:600;color:#5865f2">GameMaster</span> <span style="color:#72767d;font-size:12px">–°–µ–≥–æ–¥–Ω—è –≤ 15:30</span></div><div style="margin-top:4px">–ö—Ç–æ —Ö–æ—á–µ—Ç –ø–æ–∏–≥—Ä–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è?</div></div>
                                    </div>
                                </div>
                                <div style="padding:16px"><div style="background:#40444b;border-radius:8px;padding:12px;display:flex"><input placeholder="–ù–∞–ø–∏—Å–∞—Ç—å –≤ #–æ–±—â–∏–π" style="flex:1;background:transparent;border:none;color:white"><span style="cursor:pointer">üòÄ</span></div></div>
                            </div>
                        </div>`;
                case 'netflix':
                    return `
                        <div style="background:#141414;height:100%;overflow-y:auto">
                            <div style="background:linear-gradient(to bottom,transparent,#141414),url('https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=800') center/cover;height:400px;padding:40px;display:flex;flex-direction:column;justify-content:flex-end">
                                <h1 style="font-size:48px;margin-bottom:16px">Stranger Things</h1>
                                <p style="max-width:500px;margin-bottom:20px;color:#ddd">–ì—Ä—É–ø–ø–∞ –¥—Ä—É–∑–µ–π —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è —Å–æ —Å–≤–µ—Ä—Ö—ä–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Å–∏–ª–∞–º–∏ –≤ –º–∞–ª–µ–Ω—å–∫–æ–º –≥–æ—Ä–æ–¥–∫–µ...</p>
                                <div style="display:flex;gap:12px">
                                    <button style="background:white;color:black;border:none;padding:12px 24px;border-radius:4px;font-size:16px;cursor:pointer;display:flex;align-items:center;gap:8px">‚ñ∂ –°–º–æ—Ç—Ä–µ—Ç—å</button>
                                    <button style="background:rgba(109,109,110,0.7);color:white;border:none;padding:12px 24px;border-radius:4px;font-size:16px;cursor:pointer">‚ÑπÔ∏è –ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                                </div>
                            </div>
                            <div style="padding:20px">
                                <h2 style="margin-bottom:16px">–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</h2>
                                <div style="display:flex;gap:8px;overflow-x:auto">
                                    <div style="min-width:200px;height:120px;background:#333;border-radius:4px;display:flex;align-items:center;justify-content:center;cursor:pointer">üé¨ –§–∏–ª—å–º 1</div>
                                    <div style="min-width:200px;height:120px;background:#333;border-radius:4px;display:flex;align-items:center;justify-content:center;cursor:pointer">üé¨ –§–∏–ª—å–º 2</div>
                                    <div style="min-width:200px;height:120px;background:#333;border-radius:4px;display:flex;align-items:center;justify-content:center;cursor:pointer">üé¨ –§–∏–ª—å–º 3</div>
                                </div>
                            </div>
                        </div>`;
                case 'vlc':
                    return `
                        <div style="background:#000;height:100%;display:flex;flex-direction:column">
                            <div style="background:#444;padding:4px 8px;font-size:12px;display:flex;gap:16px">
                                <span>–ú–µ–¥–∏–∞</span><span>–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ</span><span>–ê—É–¥–∏–æ</span><span>–í–∏–¥–µ–æ</span><span>–°—É–±—Ç–∏—Ç—Ä—ã</span><span>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</span><span>–í–∏–¥</span><span>–°–ø—Ä–∞–≤–∫–∞</span>
                            </div>
                            <div style="flex:1;display:flex;align-items:center;justify-content:center;background:#1a1a1a">
                                <div style="text-align:center">
                                    <div style="font-size:120px;margin-bottom:20px">üé¨</div>
                                    <p style="color:#888">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è</p>
                                    <p style="color:#666;font-size:13px;margin-top:8px">–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ Ctrl+O</p>
                                </div>
                            </div>
                            <div style="background:#444;padding:8px">
                                <div style="height:4px;background:#666;border-radius:2px;margin-bottom:8px"><div style="width:0%;height:100%;background:#ff8800;border-radius:2px"></div></div>
                                <div style="display:flex;align-items:center;gap:16px;justify-content:center">
                                    <button style="background:none;border:none;color:white;font-size:20px;cursor:pointer">‚èÆ</button>
                                    <button style="background:none;border:none;color:white;font-size:28px;cursor:pointer">‚ñ∂</button>
                                    <button style="background:none;border:none;color:white;font-size:20px;cursor:pointer">‚è≠</button>
                                    <span style="color:#888;font-size:12px;margin-left:20px">00:00 / 00:00</span>
                                    <div style="margin-left:auto;display:flex;gap:12px;align-items:center">
                                        <span>üîä</span>
                                        <input type="range" style="width:80px">
                                        <span>‚õ∂</span>
                                    </div>
                                </div>
                            </div>
                        </div>`;
                case 'gimp':
                    return `
                        <div style="background:#454545;height:100%;display:flex;flex-direction:column">
                            <div style="background:#333;padding:4px 8px;font-size:12px;display:flex;gap:16px">
                                <span>–§–∞–π–ª</span><span>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</span><span>–í—ã–¥–µ–ª–µ–Ω–∏–µ</span><span>–í–∏–¥</span><span>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</span><span>–°–ª–æ–π</span><span>–¶–≤–µ—Ç–∞</span><span>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</span><span>–§–∏–ª—å—Ç—Ä—ã</span>
                            </div>
                            <div style="display:flex;flex:1">
                                <div style="width:40px;background:#333;display:flex;flex-direction:column;align-items:center;padding:8px 0;gap:4px">
                                    <div style="width:28px;height:28px;background:#555;border-radius:4px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:14px">‚úèÔ∏è</div>
                                    <div style="width:28px;height:28px;background:#555;border-radius:4px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:14px">üñåÔ∏è</div>
                                    <div style="width:28px;height:28px;background:#555;border-radius:4px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:14px">ü™£</div>
                                    <div style="width:28px;height:28px;background:#555;border-radius:4px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:14px">‚úÇÔ∏è</div>
                                    <div style="width:28px;height:28px;background:#555;border-radius:4px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:14px">üîç</div>
                                </div>
                                <div style="flex:1;display:flex;align-items:center;justify-content:center;background:repeating-conic-gradient(#666 0% 25%, #555 0% 50%) 50% / 20px 20px">
                                    <div style="width:400px;height:300px;background:white;box-shadow:0 4px 20px rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;color:#333">–ù–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 800√ó600</div>
                                </div>
                                <div style="width:200px;background:#333;padding:8px">
                                    <div style="color:#ccc;font-size:12px;margin-bottom:8px">–°–ª–æ–∏</div>
                                    <div style="background:#444;padding:8px;border-radius:4px;margin-bottom:4px;font-size:12px;cursor:pointer">üëÅÔ∏è –°–ª–æ–π 1</div>
                                    <div style="background:#555;padding:8px;border-radius:4px;font-size:12px;cursor:pointer">üëÅÔ∏è –§–æ–Ω</div>
                                </div>
                            </div>
                        </div>`;
                case 'blender':
                    return `
                        <div style="background:#1d1d1d;height:100%;display:flex;flex-direction:column">
                            <div style="background:#303030;padding:4px 8px;font-size:12px;display:flex;gap:16px;border-bottom:1px solid #1a1a1a">
                                <span style="color:#ff7033">‚¨°</span><span>File</span><span>Edit</span><span>Render</span><span>Window</span><span>Help</span>
                            </div>
                            <div style="display:flex;flex:1">
                                <div style="flex:1;background:linear-gradient(180deg,#2a2a2a,#1a1a1a);display:flex;align-items:center;justify-content:center;position:relative">
                                    <div style="font-size:150px">üßä</div>
                                    <div style="position:absolute;bottom:20px;left:20px;font-size:12px;color:#888">View: Perspective | Objects: 1 | Verts: 8</div>
                                    <div style="position:absolute;top:20px;right:20px;background:#303030;padding:8px;border-radius:4px;font-size:12px">
                                        <div style="margin-bottom:4px">üìç Location</div>
                                        <div style="color:#888">X: 0.0 Y: 0.0 Z: 0.0</div>
                                    </div>
                                </div>
                                <div style="width:250px;background:#303030;padding:8px">
                                    <div style="color:#888;font-size:11px;margin-bottom:8px">OUTLINER</div>
                                    <div style="font-size:12px;padding:4px;cursor:pointer">üì∑ Camera</div>
                                    <div style="font-size:12px;padding:4px;background:#444;border-radius:2px;cursor:pointer">üßä Cube</div>
                                    <div style="font-size:12px;padding:4px;cursor:pointer">üí° Light</div>
                                    <div style="border-top:1px solid #1a1a1a;margin:12px 0"></div>
                                    <div style="color:#888;font-size:11px;margin-bottom:8px">PROPERTIES</div>
                                    <div style="font-size:12px">Transform</div>
                                </div>
                            </div>
                            <div style="background:#303030;padding:8px;display:flex;gap:8px;font-size:20px;justify-content:center;border-top:1px solid #1a1a1a">
                                <span style="cursor:pointer" title="Object Mode">üéØ</span>
                                <span style="cursor:pointer" title="Edit Mode">‚úèÔ∏è</span>
                                <span style="cursor:pointer" title="Sculpt Mode">üñåÔ∏è</span>
                            </div>
                        </div>`;
                case 'firefox':
                    return `
                        <div style="display:flex;flex-direction:column;height:100%">
                            <div style="background:#42414d;padding:8px;display:flex;gap:8px;align-items:center">
                                <button style="background:none;border:none;color:white;font-size:16px;cursor:pointer">‚Üê</button>
                                <button style="background:none;border:none;color:white;font-size:16px;cursor:pointer">‚Üí</button>
                                <button style="background:none;border:none;color:white;font-size:16px;cursor:pointer">üîÑ</button>
                                <div style="flex:1;background:#1c1b22;padding:8px 16px;border-radius:8px;display:flex;align-items:center;gap:8px">
                                    <span>üîí</span>
                                    <input value="https://www.mozilla.org" style="flex:1;background:none;border:none;color:white">
                                </div>
                            </div>
                            <div style="flex:1;background:linear-gradient(180deg,#20123a,#1c1b22);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px">
                                <div style="font-size:80px;margin-bottom:20px">ü¶ä</div>
                                <div style="background:rgba(255,255,255,0.1);padding:12px 24px;border-radius:8px;display:flex;align-items:center;gap:12px;width:100%;max-width:500px;margin-bottom:30px">
                                    <span>üîç</span>
                                    <input placeholder="–ù–∞–π—Ç–∏ –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–µ" style="flex:1;background:none;border:none;color:white;font-size:16px" onclick="window.open('https://www.google.com','_blank')">
                                </div>
                                <div style="display:flex;gap:20px;flex-wrap:wrap;justify-content:center">
                                    <div style="text-align:center;cursor:pointer" onclick="window.open('https://youtube.com','_blank')"><div style="width:60px;height:60px;background:#ff0000;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:28px">‚ñ∂</div><span style="font-size:12px;color:#888">YouTube</span></div>
                                    <div style="text-align:center;cursor:pointer" onclick="window.open('https://twitter.com','_blank')"><div style="width:60px;height:60px;background:#1da1f2;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:28px">üê¶</div><span style="font-size:12px;color:#888">Twitter</span></div>
                                </div>
                            </div>
                        </div>`;
                case 'winrar':
                    return `
                        <div style="background:#f0f0f0;height:100%;color:#333">
                            <div style="background:linear-gradient(180deg,#fff,#e0e0e0);padding:4px 8px;display:flex;gap:16px;font-size:13px;border-bottom:1px solid #ccc">
                                <span>–§–∞–π–ª</span><span>–ö–æ–º–∞–Ω–¥—ã</span><span>–°–µ—Ä–≤–∏—Å</span><span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span><span>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã</span><span>–°–ø—Ä–∞–≤–∫–∞</span>
                            </div>
                            <div style="background:#fff;padding:8px;display:flex;gap:8px;border-bottom:1px solid #ccc">
                                <button style="padding:4px 12px;cursor:pointer">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
                                <button style="padding:4px 12px;cursor:pointer">üì§ –ò–∑–≤–ª–µ—á—å</button>
                                <button style="padding:4px 12px;cursor:pointer">üß™ –¢–µ—Å—Ç</button>
                                <button style="padding:4px 12px;cursor:pointer">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                            </div>
                            <div style="padding:8px;background:#fff;border-bottom:1px solid #ccc;display:flex;align-items:center;gap:8px">
                                <span>üìÅ</span>
                                <input value="C:\\Users\\User\\Downloads" style="flex:1;padding:4px 8px;border:1px solid #ccc">
                            </div>
                            <div style="background:#fff;flex:1;padding:8px">
                                <div style="display:grid;grid-template-columns:auto 1fr auto auto;gap:8px;font-size:13px;padding:8px;background:#e8e8e8;font-weight:bold">
                                    <span></span><span>–ò–º—è</span><span>–†–∞–∑–º–µ—Ä</span><span>–¢–∏–ø</span>
                                </div>
                                <div style="display:grid;grid-template-columns:auto 1fr auto auto;gap:8px;font-size:13px;padding:8px;cursor:pointer" onmouseover="this.style.background='#cce8ff'" onmouseout="this.style.background='transparent'">
                                    <span>üì¶</span><span>project.zip</span><span>2.5 MB</span><span>ZIP –∞—Ä—Ö–∏–≤</span>
                                </div>
                                <div style="display:grid;grid-template-columns:auto 1fr auto auto;gap:8px;font-size:13px;padding:8px;cursor:pointer" onmouseover="this.style.background='#cce8ff'" onmouseout="this.style.background='transparent'">
                                    <span>üì¶</span><span>photos.rar</span><span>15.8 MB</span><span>RAR –∞—Ä—Ö–∏–≤</span>
                                </div>
                            </div>
                        </div>`;
                case 'nodejs':
                    return `
                        <div style="background:#333;height:100%;font-family:monospace;padding:20px;overflow-y:auto">
                            <div style="color:#3c873a;font-size:24px;margin-bottom:20px">‚¨¢ Node.js v20.10.0</div>
                            <div style="color:#8cc84b;margin-bottom:8px">Welcome to Node.js!</div>
                            <div style="color:#888;margin-bottom:20px">Type ".help" for more information.</div>
                            <div style="display:flex;margin-bottom:8px"><span style="color:#8cc84b">&gt; </span><span>console.log('Hello, Node.js!');</span></div>
                            <div style="margin-bottom:8px">Hello, Node.js!</div>
                            <div style="color:#888;margin-bottom:20px">undefined</div>
                            <div style="display:flex;margin-bottom:8px"><span style="color:#8cc84b">&gt; </span><span>const http = require('http');</span></div>
                            <div style="color:#888;margin-bottom:20px">undefined</div>
                            <div style="display:flex;margin-bottom:8px"><span style="color:#8cc84b">&gt; </span><span>process.version</span></div>
                            <div style="color:#3c873a;margin-bottom:20px">'v20.10.0'</div>
                            <div style="display:flex"><span style="color:#8cc84b">&gt; </span><input style="background:none;border:none;color:white;flex:1;font-family:inherit" placeholder="–í–≤–µ–¥–∏—Ç–µ JavaScript –∫–æ–¥..."></div>
                        </div>`;
                case 'python':
                    return `
                        <div style="background:#1e1e1e;height:100%;font-family:monospace;padding:20px;overflow-y:auto">
                            <div style="color:#3572A5;font-size:20px;margin-bottom:20px">üêç Python 3.12.0</div>
                            <div style="color:#888;margin-bottom:8px">Python 3.12.0 (main, Oct 2 2024, 00:00:00) [GCC 11.4.0] on linux</div>
                            <div style="color:#888;margin-bottom:20px">Type "help", "copyright", "credits" or "license" for more information.</div>
                            <div style="display:flex;margin-bottom:8px"><span style="color:#3572A5">&gt;&gt;&gt; </span><span>print("Hello, Python!")</span></div>
                            <div style="margin-bottom:20px">Hello, Python!</div>
                            <div style="display:flex;margin-bottom:8px"><span style="color:#3572A5">&gt;&gt;&gt; </span><span>import math</span></div>
                            <div style="display:flex;margin-bottom:8px"><span style="color:#3572A5">&gt;&gt;&gt; </span><span>math.pi</span></div>
                            <div style="color:#b5cea8;margin-bottom:20px">3.141592653589793</div>
                            <div style="display:flex;margin-bottom:8px"><span style="color:#3572A5">&gt;&gt;&gt; </span><span>[x**2 for x in range(10)]</span></div>
                            <div style="color:#ce9178;margin-bottom:20px">[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]</div>
                            <div style="display:flex"><span style="color:#3572A5">&gt;&gt;&gt; </span><input style="background:none;border:none;color:white;flex:1;font-family:inherit" placeholder="–í–≤–µ–¥–∏—Ç–µ Python –∫–æ–¥..."></div>
                        </div>`;
                case 'zoom':
                    return `
                        <div style="background:#0b5cff;height:100%;display:flex;flex-direction:column">
                            <div style="flex:1;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:40px">
                                <div style="font-size:80px;margin-bottom:20px">üìπ</div>
                                <h1 style="font-size:32px;margin-bottom:30px">Zoom</h1>
                                <div style="display:flex;gap:16px;flex-wrap:wrap;justify-content:center">
                                    <button style="background:#ff9500;border:none;color:white;padding:16px 32px;border-radius:12px;font-size:16px;cursor:pointer;display:flex;align-items:center;gap:8px">üìπ –ù–æ–≤–∞—è –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è</button>
                                    <button style="background:#2d8cff;border:none;color:white;padding:16px 32px;border-radius:12px;font-size:16px;cursor:pointer;display:flex;align-items:center;gap:8px">‚ûï –í–æ–π—Ç–∏</button>
                                </div>
                                <div style="display:flex;gap:32px;margin-top:40px">
                                    <div style="text-align:center;cursor:pointer"><div style="font-size:32px;margin-bottom:8px">üìÖ</div><span style="font-size:14px">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å</span></div>
                                    <div style="text-align:center;cursor:pointer"><div style="font-size:32px;margin-bottom:8px">üñ•Ô∏è</div><span style="font-size:14px">–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è</span></div>
                                </div>
                            </div>
                            <div style="background:rgba(0,0,0,0.2);padding:16px;text-align:center;font-size:13px">
                                –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —ç–∫—Ä–∞–Ω–∞ –Ω–∞–∂–º–∏—Ç–µ "–ù–æ–≤–∞—è –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è"
                            </div>
                        </div>`;
                case 'slack':
                    return `
                        <div style="display:flex;height:100%">
                            <div style="width:70px;background:#3f0f40;display:flex;flex-direction:column;align-items:center;padding:12px 0;gap:12px">
                                <div style="width:44px;height:44px;background:#fff;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:24px">üíº</div>
                                <div style="width:44px;height:44px;background:rgba(255,255,255,0.2);border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer">‚ûï</div>
                            </div>
                            <div style="width:220px;background:#3f0f40">
                                <div style="padding:16px;font-weight:600;font-size:18px">Workspace ‚ñæ</div>
                                <div style="padding:0 12px">
                                    <div style="color:rgba(255,255,255,0.7);font-size:13px;padding:8px">–ö–∞–Ω–∞–ª—ã</div>
                                    <div style="padding:6px 12px;background:#1164a3;border-radius:6px;cursor:pointer"># general</div>
                                    <div style="padding:6px 12px;cursor:pointer" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background='transparent'"># random</div>
                                    <div style="padding:6px 12px;cursor:pointer" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background='transparent'"># dev-team</div>
                                </div>
                            </div>
                            <div style="flex:1;background:#1a1d21;display:flex;flex-direction:column">
                                <div style="padding:16px;border-bottom:1px solid #35373b;font-weight:600"># general</div>
                                <div style="flex:1;padding:20px;overflow-y:auto">
                                    <div style="display:flex;gap:12px;margin-bottom:20px">
                                        <div style="width:36px;height:36px;background:#e91e63;border-radius:4px"></div>
                                        <div><div><span style="font-weight:600">Anna</span> <span style="color:#616061;font-size:12px">10:30 AM</span></div><div style="margin-top:4px;color:#d1d2d3">–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! üëã</div></div>
                                    </div>
                                    <div style="display:flex;gap:12px">
                                        <div style="width:36px;height:36px;background:#4caf50;border-radius:4px"></div>
                                        <div><div><span style="font-weight:600">Mike</span> <span style="color:#616061;font-size:12px">10:32 AM</span></div><div style="margin-top:4px;color:#d1d2d3">–ü—Ä–∏–≤–µ—Ç! –ì–æ—Ç–æ–≤ –∫ —Å–æ–∑–≤–æ–Ω—É?</div></div>
                                    </div>
                                </div>
                                <div style="padding:20px"><div style="background:#222529;border:1px solid #35373b;border-radius:8px;padding:12px;display:flex"><input placeholder="–ù–∞–ø–∏—Å–∞—Ç—å –≤ #general" style="flex:1;background:none;border:none;color:white"></div></div>
                            </div>
                        </div>`;
                case 'obs':
                    return `
                        <div style="background:#1a1a2e;height:100%;display:flex;flex-direction:column">
                            <div style="background:#16162a;padding:4px 8px;font-size:12px;display:flex;gap:16px">
                                <span>–§–∞–π–ª</span><span>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</span><span>–í–∏–¥</span><span>–ü—Ä–æ—Ñ–∏–ª—å</span><span>–ö–æ–ª–ª–µ–∫—Ü–∏—è —Å—Ü–µ–Ω</span><span>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</span><span>–°–ø—Ä–∞–≤–∫–∞</span>
                            </div>
                            <div style="flex:1;display:flex">
                                <div style="flex:1;background:#0f0f1a;margin:8px;border-radius:4px;display:flex;align-items:center;justify-content:center;position:relative">
                                    <div style="font-size:64px">üñ•Ô∏è</div>
                                    <div style="position:absolute;top:8px;right:8px;background:red;padding:4px 8px;border-radius:4px;font-size:11px">‚óè REC</div>
                                    <div style="position:absolute;bottom:8px;left:8px;font-size:12px;color:#888">–ó–∞—Ö–≤–∞—Ç —ç–∫—Ä–∞–Ω–∞</div>
                                </div>
                            </div>
                            <div style="display:flex;gap:8px;padding:8px;background:#16162a">
                                <div style="flex:1;background:#0f0f1a;border-radius:4px;padding:8px">
                                    <div style="font-size:11px;color:#888;margin-bottom:8px">–°—Ü–µ–Ω—ã</div>
                                    <div style="padding:6px;background:#252545;border-radius:2px;font-size:12px;cursor:pointer">üé¨ –°—Ü–µ–Ω–∞ 1</div>
                                </div>
                                <div style="flex:1;background:#0f0f1a;border-radius:4px;padding:8px">
                                    <div style="font-size:11px;color:#888;margin-bottom:8px">–ò—Å—Ç–æ—á–Ω–∏–∫–∏</div>
                                    <div style="padding:6px;font-size:12px;cursor:pointer">üñ•Ô∏è –ó–∞—Ö–≤–∞—Ç —ç–∫—Ä–∞–Ω–∞</div>
                                    <div style="padding:6px;font-size:12px;cursor:pointer">üé§ –ú–∏–∫—Ä–æ—Ñ–æ–Ω</div>
                                </div>
                                <div style="flex:1;background:#0f0f1a;border-radius:4px;padding:8px">
                                    <div style="font-size:11px;color:#888;margin-bottom:8px">–ú–∏–∫—à–µ—Ä</div>
                                    <div style="display:flex;align-items:center;gap:8px;font-size:12px"><span>üîä</span><input type="range" style="flex:1"></div>
                                </div>
                            </div>
                            <div style="background:#16162a;padding:8px;display:flex;gap:8px;justify-content:center">
                                <button style="background:#363659;border:none;color:white;padding:8px 20px;border-radius:4px;cursor:pointer">‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—é</button>
                                <button style="background:#d32f2f;border:none;color:white;padding:8px 20px;border-radius:4px;cursor:pointer">‚óè –ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å</button>
                            </div>
                        </div>`;
                case 'chrome':
                    return `
                        <div style="display:flex;flex-direction:column;height:100%">
                            <div style="background:#dee1e6;padding:8px;display:flex;gap:8px;align-items:center">
                                <div style="display:flex;gap:8px">
                                    <button style="background:none;border:none;color:#5f6368;font-size:16px;cursor:pointer">‚Üê</button>
                                    <button style="background:none;border:none;color:#5f6368;font-size:16px;cursor:pointer">‚Üí</button>
                                    <button style="background:none;border:none;color:#5f6368;font-size:16px;cursor:pointer">üîÑ</button>
                                </div>
                                <div style="flex:1;background:#fff;padding:8px 16px;border-radius:24px;display:flex;align-items:center;gap:8px;box-shadow:0 1px 3px rgba(0,0,0,0.1)">
                                    <span>üîí</span>
                                    <input value="google.com" style="flex:1;background:none;border:none;color:#333">
                                    <span style="cursor:pointer">‚≠ê</span>
                                </div>
                            </div>
                            <div style="flex:1;background:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px">
                                <div style="font-size:80px;margin-bottom:30px">üåê</div>
                                <div style="display:flex;gap:8px;margin-bottom:40px">
                                    <span style="font-size:48px;color:#4285f4">G</span>
                                    <span style="font-size:48px;color:#ea4335">o</span>
                                    <span style="font-size:48px;color:#fbbc05">o</span>
                                    <span style="font-size:48px;color:#4285f4">g</span>
                                    <span style="font-size:48px;color:#34a853">l</span>
                                    <span style="font-size:48px;color:#ea4335">e</span>
                                </div>
                                <div style="width:100%;max-width:500px;background:#fff;border:1px solid #dfe1e5;border-radius:24px;padding:12px 20px;display:flex;align-items:center;box-shadow:0 1px 6px rgba(32,33,36,.28);cursor:pointer" onclick="window.open('https://www.google.com','_blank')">
                                    <span style="color:#9aa0a6">üîç</span>
                                    <span style="flex:1;margin-left:12px;color:#9aa0a6">–ü–æ–∏—Å–∫ –≤ Google</span>
                                    <span style="color:#4285f4">üé§</span>
                                </div>
                            </div>
                        </div>`;
                default:
                    return '<div style="padding:20px;text-align:center"><div style="font-size:64px;margin-bottom:20px">' + (apps[appId]?.icon || 'üì¶') + '</div><h2>' + (apps[appId]?.title || '–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ') + '</h2><p style="color:#888;margin-top:12px">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é</p></div>';
            }
        }

        // File Explorer
        const explorerFS = {
            'C:\\': ['Users', 'Program Files', 'Windows'],
            'C:\\Users': ['User'],
            'C:\\Users\\User': ['Desktop', 'Documents', 'Downloads', 'Pictures'],
            'C:\\Users\\User\\Desktop': [],
            'C:\\Users\\User\\Documents': ['–û—Ç—á—ë—Ç.docx', '–ü—Ä–æ–µ–∫—Ç'],
            'C:\\Users\\User\\Documents\\–ü—Ä–æ–µ–∫—Ç': ['index.html', 'style.css'],
            'C:\\Users\\User\\Downloads': ['setup.exe', 'image.png'],
            'C:\\Users\\User\\Pictures': ['—Ñ–æ—Ç–æ1.jpg', '—Ñ–æ—Ç–æ2.jpg'],
            'C:\\Program Files': ['Microsoft'],
            'C:\\Windows': ['System32']
        };
        const explorerPaths = {};
        const explorerHistory = {};

        function initExplorer(win, appId) {
            explorerPaths[appId] = 'C:\\Users\\User';
            explorerHistory[appId] = ['C:\\Users\\User'];
            renderExplorer(appId);
            win.querySelectorAll('.explorer-item').forEach(item => {
                item.addEventListener('click', () => navigateExplorer(appId, item.dataset.path));
            });
        }

        function navigateExplorer(appId, path) {
            explorerPaths[appId] = path;
            explorerHistory[appId].push(path);
            renderExplorer(appId);
        }

        function explorerBack(appId) {
            if (explorerHistory[appId]?.length > 1) {
                explorerHistory[appId].pop();
                explorerPaths[appId] = explorerHistory[appId][explorerHistory[appId].length - 1];
                renderExplorer(appId);
            }
        }

        function explorerUp(appId) {
            const current = explorerPaths[appId];
            const parts = current.split('\\').filter(p => p);
            if (parts.length > 1) {
                parts.pop();
                navigateExplorer(appId, parts.length === 1 ? parts[0] + '\\' : parts.join('\\'));
            }
        }

        function renderExplorer(appId) {
            const path = explorerPaths[appId];
            const content = document.getElementById(`explorer-content-${appId}`);
            const pathInput = document.getElementById(`explorer-path-${appId}`);
            if (!content) return;
            pathInput.value = path;
            content.innerHTML = '';
            const items = explorerFS[path] || [];
            items.forEach(item => {
                const isFolder = !item.includes('.');
                const div = document.createElement('div');
                div.className = 'file-item';
                div.innerHTML = `<div style="font-size:40px">${isFolder ? 'üìÅ' : 'üìÑ'}</div><span>${item}</span>`;
                div.addEventListener('dblclick', () => {
                    if (isFolder) navigateExplorer(appId, path + '\\' + item);
                });
                content.appendChild(div);
            });
        }

        // Browser with REAL Google search
        function initBrowser(win) {
            const content = win.querySelector('#browser-content');
            const urlInput = win.querySelector('#browser-url');
            const homeBtn = win.querySelector('#browser-home-btn');
            const goBtn = win.querySelector('#browser-go');
            const refreshBtn = win.querySelector('#browser-refresh');

            showBrowserHome(content, urlInput);

            urlInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') navigateBrowser(urlInput.value, content, urlInput);
            });
            goBtn.addEventListener('click', () => navigateBrowser(urlInput.value, content, urlInput));
            homeBtn.addEventListener('click', () => showBrowserHome(content, urlInput));
            refreshBtn.addEventListener('click', () => navigateBrowser(urlInput.value, content, urlInput));
        }

        function showBrowserHome(content, urlInput) {
            urlInput.value = 'https://www.google.com';
            content.innerHTML = `
                <div class="browser-home">
                    <div class="google-logo">
                        <span>G</span><span>o</span><span>o</span><span>g</span><span>l</span><span>e</span>
                    </div>
                    <div class="google-search-box">
                        <span>üîç</span>
                        <input type="text" class="google-search-input" id="google-search" placeholder="–ü–æ–∏—Å–∫ –≤ Google">
                    </div>
                    <div class="google-buttons">
                        <button class="google-btn" id="google-search-btn">–ü–æ–∏—Å–∫ –≤ Google</button>
                        <button class="google-btn primary" id="real-google-btn">üîó –û—Ç–∫—Ä—ã—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π Google</button>
                    </div>
                    <p style="margin-top:20px;color:#666;font-size:13px;">–ù–∞–∂–º–∏—Ç–µ "–û—Ç–∫—Ä—ã—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π Google" –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ –Ω–∞—Å—Ç–æ—è—â–µ–º –±—Ä–∞—É–∑–µ—Ä–µ</p>
                    <div class="browser-bookmarks">
                        <div class="browser-bookmark" data-url="https://youtube.com"><div class="browser-bookmark-icon">‚ñ∂Ô∏è</div><span>YouTube</span></div>
                        <div class="browser-bookmark" data-url="https://github.com"><div class="browser-bookmark-icon">üíª</div><span>GitHub</span></div>
                        <div class="browser-bookmark" data-url="https://wikipedia.org"><div class="browser-bookmark-icon">üìö</div><span>Wikipedia</span></div>
                        <div class="browser-bookmark" data-url="https://twitter.com"><div class="browser-bookmark-icon">üê¶</div><span>Twitter</span></div>
                    </div>
                </div>
            `;

            const searchInput = content.querySelector('#google-search');
            const searchBtn = content.querySelector('#google-search-btn');
            const realGoogleBtn = content.querySelector('#real-google-btn');

            searchInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') openRealGoogle(searchInput.value);
            });
            searchBtn.addEventListener('click', () => openRealGoogle(searchInput.value));
            realGoogleBtn.addEventListener('click', () => openRealGoogle(searchInput.value));

            content.querySelectorAll('.browser-bookmark').forEach(bm => {
                bm.addEventListener('click', () => window.open(bm.dataset.url, '_blank'));
            });
        }

        function openRealGoogle(query) {
            if (query.trim()) {
                window.open(`https://www.google.com/search?q=${encodeURIComponent(query)}`, '_blank');
            } else {
                window.open('https://www.google.com', '_blank');
            }
        }

        function navigateBrowser(url, content, urlInput) {
            if (!url.startsWith('http')) {
                if (!url.includes('.') || url.includes(' ')) {
                    openRealGoogle(url);
                    return;
                }
                url = 'https://' + url;
            }
            window.open(url, '_blank');
        }

        // Microsoft Store with desktop icons
        function initStore(win) {
            renderStoreApps(win, 'all');
            win.querySelectorAll('.store-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    win.querySelectorAll('.store-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    renderStoreApps(win, tab.dataset.cat);
                });
            });
        }

        function renderStoreApps(win, category) {
            const grid = win.querySelector('#store-grid');
            const filtered = category === 'all' ? storeApps : storeApps.filter(a => a.category === category);
            
            grid.innerHTML = filtered.map(app => `
                <div class="store-app" data-id="${app.id}">
                    <div class="store-app-icon">${app.icon}</div>
                    <h4>${app.name}</h4>
                    <p>${app.desc}</p>
                    <div class="store-app-rating">‚òÖ ${app.rating}</div>
                    <button class="store-btn ${installedApps[app.id] ? 'installed' : ''}" data-id="${app.id}">
                        ${installedApps[app.id] ? '‚úì –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ' : '–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å'}
                    </button>
                    <div class="store-progress" id="progress-${app.id}">
                        <div class="store-progress-bar"></div>
                    </div>
                </div>
            `).join('');

            grid.querySelectorAll('.store-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    if (!installedApps[btn.dataset.id]) {
                        installStoreApp(btn.dataset.id, btn, win);
                    }
                });
            });
        }

        function installStoreApp(id, btn, win) {
            const app = storeApps.find(a => a.id === id);
            if (!app) return;

            btn.classList.add('installing');
            btn.textContent = '–£—Å—Ç–∞–Ω–æ–≤–∫–∞...';
            
            const progress = document.getElementById(`progress-${id}`);
            const bar = progress.querySelector('.store-progress-bar');
            progress.style.display = 'block';
            
            let percent = 0;
            const interval = setInterval(() => {
                percent += Math.random() * 20;
                if (percent >= 100) {
                    percent = 100;
                    clearInterval(interval);
                    
                    installedApps[id] = true;
                    btn.classList.remove('installing');
                    btn.classList.add('installed');
                    btn.textContent = '‚úì –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ';
                    progress.style.display = 'none';
                    
                    // Add to desktop
                    addDesktopIcon(app);
                    // Add to start menu
                    addToStartMenu(app);
                    // Show notification
                    showNotification(`${app.name} —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!`, '–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –Ω–∞ —Ä–∞–±–æ—á–∏–π —Å—Ç–æ–ª');
                }
                bar.style.width = percent + '%';
            }, 150);
        }

        function addDesktopIcon(app) {
            const desktop = document.getElementById('desktop-icons');
            const row = Math.floor(desktopIconCount / 6);
            const col = desktopIconCount % 6;
            
            const icon = document.createElement('div');
            icon.className = 'desktop-icon';
            icon.dataset.app = app.id;
            icon.style.top = (20 + row * 100) + 'px';
            icon.style.left = (20 + col * 90) + 'px';
            icon.innerHTML = `<div class="icon-emoji">${app.icon}</div><span>${app.name}</span>`;
            
            desktop.appendChild(icon);
            setupDesktopIcon(icon);
            
            // Add to apps config
            apps[app.id] = { title: app.name, icon: app.icon, width: 800, height: 600 };
            
            desktopIconCount++;
        }

        function addToStartMenu(app) {
            const section = document.getElementById('installed-apps-section');
            const grid = document.getElementById('installed-apps-grid');
            
            section.style.display = 'block';
            
            const tile = document.createElement('div');
            tile.className = 'start-tile';
            tile.style.background = getRandomColor();
            tile.dataset.app = app.id;
            tile.innerHTML = `<span>${app.icon} ${app.name}</span>`;
            tile.addEventListener('click', () => {
                openApp(app.id);
                document.getElementById('start-menu').classList.remove('show');
            });
            
            grid.appendChild(tile);
        }

        function getRandomColor() {
            const colors = ['#0078d4', '#107c10', '#8764b8', '#e74c3c', '#00b4db', '#9b59b6', '#e91e63', '#ff5722'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        function showNotification(title, text) {
            const list = document.getElementById('notifications-list');
            const notif = document.createElement('div');
            notif.className = 'notification-item';
            notif.innerHTML = `<h4>${title}</h4><p>${text}</p>`;
            list.insertBefore(notif, list.firstChild);
        }

        // Linux Terminal
        function initLinuxTerminal(win) {
            const terminal = win.querySelector('#linux-terminal');
            terminalCwd = '/home/user';
            terminal.innerHTML = `
                <div class="linux-line">Welcome to Ubuntu 22.04.3 LTS</div>
                <div class="linux-line">Last login: ${new Date().toLocaleString()}</div>
                <div class="linux-line"> </div>
            `;
            appendLinuxPrompt(terminal);
            terminal.addEventListener('click', () => terminal.querySelector('.linux-input')?.focus());
        }

        function appendLinuxPrompt(terminal) {
            const line = document.createElement('div');
            line.className = 'linux-line';
            line.innerHTML = `<span class="linux-prompt">user@ubuntu</span>:<span class="linux-path">${terminalCwd}</span>$ <input type="text" class="linux-input" autofocus>`;
            terminal.appendChild(line);
            const input = line.querySelector('.linux-input');
            input.focus();
            
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    const cmd = input.value;
                    input.replaceWith(document.createTextNode(cmd));
                    if (cmd.trim()) terminalHistory.push(cmd);
                    processLinuxCommand(cmd, terminal);
                } else if (e.key === 'ArrowUp' && terminalHistory.length > 0) {
                    if (historyIndex < terminalHistory.length - 1) historyIndex++;
                    input.value = terminalHistory[terminalHistory.length - 1 - historyIndex] || '';
                } else if (e.key === 'ArrowDown') {
                    if (historyIndex > 0) historyIndex--;
                    else historyIndex = -1;
                    input.value = historyIndex >= 0 ? terminalHistory[terminalHistory.length - 1 - historyIndex] : '';
                }
            });
            terminal.scrollTop = terminal.scrollHeight;
        }

        function processLinuxCommand(cmd, terminal) {
            const args = cmd.trim().split(/\s+/);
            const command = args[0]?.toLowerCase();
            let output = '';

            switch(command) {
                case '': break;
                case 'help':
                    output = '<span class="linux-info">Commands: ls, cd, pwd, mkdir, clear, echo, date, whoami, npm, node, git</span>';
                    break;
                case 'ls':
                    const dir = fileSystem[terminalCwd];
                    output = dir?.children?.map(c => {
                        const isDir = fileSystem[terminalCwd + '/' + c]?.type === 'dir';
                        return isDir ? `<span class="linux-info">${c}/</span>` : c;
                    }).join('  ') || '';
                    break;
                case 'cd':
                    if (!args[1] || args[1] === '~') terminalCwd = '/home/user';
                    else if (args[1] === '..') {
                        const parts = terminalCwd.split('/').filter(p => p);
                        parts.pop();
                        terminalCwd = '/' + parts.join('/') || '/';
                    } else {
                        const newPath = args[1].startsWith('/') ? args[1] : terminalCwd + '/' + args[1];
                        if (fileSystem[newPath]) terminalCwd = newPath;
                        else output = `<span class="linux-error">cd: ${args[1]}: No such directory</span>`;
                    }
                    break;
                case 'pwd': output = terminalCwd; break;
                case 'clear': terminal.innerHTML = ''; appendLinuxPrompt(terminal); return;
                case 'echo': output = args.slice(1).join(' '); break;
                case 'date': output = new Date().toString(); break;
                case 'whoami': output = 'user'; break;
                case 'mkdir':
                    if (args[1]) {
                        const newPath = terminalCwd + '/' + args[1];
                        fileSystem[newPath] = { type: 'dir', children: [] };
                        fileSystem[terminalCwd].children.push(args[1]);
                        output = `<span class="linux-success">Directory created</span>`;
                    }
                    break;
                case 'npm':
                    output = processNpm(args.slice(1), terminal);
                    if (output === 'ASYNC') return;
                    break;
                case 'node':
                    output = args[1] === '-v' ? 'v20.10.0' : '<span class="linux-info">Node.js v20.10.0</span>';
                    break;
                case 'git':
                    output = args[1] === '--version' ? 'git version 2.43.0' : '<span class="linux-info">usage: git [command]</span>';
                    break;
                default:
                    output = `<span class="linux-error">${command}: command not found</span>`;
            }

            if (output) {
                const outLine = document.createElement('div');
                outLine.className = 'linux-line';
                outLine.innerHTML = output;
                terminal.appendChild(outLine);
            }
            appendLinuxPrompt(terminal);
        }

        function processNpm(args, terminal) {
            const subcmd = args[0];
            if (subcmd === '-v') return '10.2.5';
            if (subcmd === 'install' || subcmd === 'i') {
                const isGlobal = args.includes('-g');
                const pkg = args.filter(a => !a.startsWith('-') && a !== 'install' && a !== 'i').join(' ');
                if (!pkg) return '<span class="linux-error">npm: missing package name</span>';
                simulateNpmInstall(pkg, isGlobal, terminal);
                return 'ASYNC';
            }
            if (subcmd === 'list') {
                const pkgs = args.includes('-g') ? globalPackages : installedPackages;
                return Object.keys(pkgs).length ? Object.entries(pkgs).map(([n,v]) => `‚îú‚îÄ‚îÄ ${n}@${v}`).join('\n') : '(empty)';
            }
            return '<span class="linux-info">npm install [-g] package</span>';
        }

        function simulateNpmInstall(pkg, isGlobal, terminal) {
            let i = 0;
            const spinners = ['‚†ã', '‚†ô', '‚†π', '‚†∏', '‚†º', '‚†¥', '‚†¶', '‚†ß', '‚†á', '‚†è'];
            const progress = document.createElement('div');
            progress.className = 'linux-line';
            progress.id = 'npm-progress';
            terminal.appendChild(progress);

            const animate = () => {
                if (i < 15) {
                    progress.innerHTML = `<span class="linux-info">${spinners[i % 10]} Installing ${pkg}... ${Math.min(100, (i + 1) * 7)}%</span>`;
                    terminal.scrollTop = terminal.scrollHeight;
                    i++;
                    setTimeout(animate, 150);
                } else {
                    progress.remove();
                    const version = '1.0.0';
                    if (isGlobal) {
                        globalPackages[pkg] = version;
                        fileSystem['/usr/local/bin'].children.push(pkg);
                    } else {
                        installedPackages[pkg] = version;
                    }
                    const result = document.createElement('div');
                    result.className = 'linux-line';
                    result.innerHTML = `<span class="linux-success">+ ${pkg}@${version}\nadded 1 package${isGlobal ? ' globally' : ''} in 2.1s</span>`;
                    terminal.appendChild(result);
                    appendLinuxPrompt(terminal);
                }
            };
            animate();
        }

        // Calculator
        function calcInput(val) {
            if (calcDisplay === '0' || calcDisplay === 'Error') calcDisplay = '';
            if (val === '¬±') calcDisplay = calcDisplay.startsWith('-') ? calcDisplay.slice(1) : '-' + calcDisplay;
            else if (val === '%') calcDisplay = String(parseFloat(calcDisplay) / 100);
            else calcDisplay += val;
            document.getElementById('calc-display').textContent = calcDisplay;
        }

        function calcOp(op) {
            calcPrevValue = parseFloat(calcDisplay);
            calcOperator = op;
            calcDisplay = '0';
        }

        function calcEquals() {
            if (calcOperator && calcPrevValue !== null) {
                const current = parseFloat(calcDisplay);
                let result;
                switch(calcOperator) {
                    case '+': result = calcPrevValue + current; break;
                    case '-': result = calcPrevValue - current; break;
                    case '*': result = calcPrevValue * current; break;
                    case '/': result = current !== 0 ? calcPrevValue / current : 'Error'; break;
                }
                calcDisplay = String(result);
                document.getElementById('calc-display').textContent = calcDisplay;
                calcOperator = null;
                calcPrevValue = null;
            }
        }

        function calcClear() {
            calcDisplay = '0';
            calcOperator = null;
            calcPrevValue = null;
            document.getElementById('calc-display').textContent = '0';
        }

        // Paint
        let paintCtx, painting = false, brushSize = 5, isEraser = false;
        function initPaint(win) {
            const canvas = win.querySelector('#paint-canvas');
            paintCtx = canvas.getContext('2d');
            paintCtx.fillStyle = 'white';
            paintCtx.fillRect(0, 0, canvas.width, canvas.height);
            
            const draw = (x, y) => {
                const rect = canvas.getBoundingClientRect();
                paintCtx.lineWidth = brushSize;
                paintCtx.lineCap = 'round';
                paintCtx.strokeStyle = isEraser ? 'white' : win.querySelector('#paint-color').value;
                paintCtx.lineTo(x - rect.left, y - rect.top);
                paintCtx.stroke();
                paintCtx.beginPath();
                paintCtx.moveTo(x - rect.left, y - rect.top);
            };
            
            canvas.addEventListener('mousedown', () => { painting = true; paintCtx.beginPath(); });
            canvas.addEventListener('mouseup', () => painting = false);
            canvas.addEventListener('mouseleave', () => painting = false);
            canvas.addEventListener('mousemove', (e) => { if (painting) draw(e.clientX, e.clientY); });
            
            canvas.addEventListener('touchstart', (e) => { painting = true; paintCtx.beginPath(); e.preventDefault(); });
            canvas.addEventListener('touchend', () => painting = false);
            canvas.addEventListener('touchmove', (e) => {
                if (painting) draw(e.touches[0].clientX, e.touches[0].clientY);
                e.preventDefault();
            });
        }
        
        function setBrushSize(size) { brushSize = size; isEraser = false; }
        function setEraser() { isEraser = true; brushSize = 20; }
        function clearCanvas() { if (paintCtx) { paintCtx.fillStyle = 'white'; paintCtx.fillRect(0, 0, 780, 520); } }

        // Game
        let snake, food, direction, score, gameRunning;
        function initGame(win) {
            const canvas = win.querySelector('#game-canvas');
            const ctx = canvas.getContext('2d');
            snake = [{x: 10, y: 10}];
            food = {x: 15, y: 15};
            direction = {x: 0, y: 0};
            score = 0;
            gameRunning = false;

            const startGame = () => {
                if (!gameRunning) {
                    gameRunning = true;
                    direction = {x: 1, y: 0};
                    if (gameInterval) clearInterval(gameInterval);
                    gameInterval = setInterval(() => updateGame(ctx, win), 100);
                }
            };

            document.addEventListener('keydown', (e) => {
                if (e.code === 'Space') startGame();
                if (e.code === 'ArrowUp' && direction.y !== 1) direction = {x: 0, y: -1};
                if (e.code === 'ArrowDown' && direction.y !== -1) direction = {x: 0, y: 1};
                if (e.code === 'ArrowLeft' && direction.x !== 1) direction = {x: -1, y: 0};
                if (e.code === 'ArrowRight' && direction.x !== -1) direction = {x: 1, y: 0};
            });

            drawGame(ctx);
        }

        function updateGame(ctx, win) {
            const head = {x: snake[0].x + direction.x, y: snake[0].y + direction.y};
            if (head.x < 0 || head.x >= 20 || head.y < 0 || head.y >= 20 || snake.some(s => s.x === head.x && s.y === head.y)) {
                gameRunning = false;
                clearInterval(gameInterval);
                snake = [{x: 10, y: 10}];
                direction = {x: 0, y: 0};
                return;
            }
            snake.unshift(head);
            if (head.x === food.x && head.y === food.y) {
                score += 10;
                win.querySelector('#game-score').textContent = score;
                food = {x: Math.floor(Math.random() * 20), y: Math.floor(Math.random() * 20)};
            } else {
                snake.pop();
            }
            drawGame(ctx);
        }

        function drawGame(ctx) {
            ctx.fillStyle = '#1a1a1a';
            ctx.fillRect(0, 0, 400, 400);
            ctx.fillStyle = '#4caf50';
            snake.forEach(s => ctx.fillRect(s.x * 20, s.y * 20, 18, 18));
            ctx.fillStyle = '#f44336';
            ctx.fillRect(food.x * 20, food.y * 20, 18, 18);
        }

        function changeStickyColor(color) {
            document.getElementById('sticky-note').style.background = color;
        }

        // Window management
        function minimizeWindow(appId) {
            openWindows[appId].style.display = 'none';
        }

        function maximizeWindow(appId) {
            openWindows[appId].classList.toggle('maximized');
        }

        function closeWindow(appId) {
            if (gameInterval && appId === 'game') clearInterval(gameInterval);
            openWindows[appId].remove();
            delete openWindows[appId];
            updateTaskbar();
        }

        function bringToFront(win) {
            win.style.zIndex = ++zIndex;
        }

        function makeWindowDraggable(win) {
            const header = win.querySelector('.window-header');
            let isDragging = false, startX, startY, startLeft, startTop;

            const startDrag = (x, y) => {
                if (win.classList.contains('maximized')) return;
                isDragging = true;
                startX = x; startY = y;
                startLeft = win.offsetLeft; startTop = win.offsetTop;
                bringToFront(win);
            };

            const moveDrag = (x, y) => {
                if (!isDragging) return;
                win.style.left = Math.max(0, startLeft + x - startX) + 'px';
                win.style.top = Math.max(0, startTop + y - startY) + 'px';
            };

            header.addEventListener('mousedown', (e) => {
                if (e.target.closest('.window-controls')) return;
                startDrag(e.clientX, e.clientY);
            });
            document.addEventListener('mousemove', (e) => moveDrag(e.clientX, e.clientY));
            document.addEventListener('mouseup', () => isDragging = false);

            header.addEventListener('touchstart', (e) => {
                if (e.target.closest('.window-controls')) return;
                startDrag(e.touches[0].clientX, e.touches[0].clientY);
            }, { passive: true });
            document.addEventListener('touchmove', (e) => {
                if (isDragging) moveDrag(e.touches[0].clientX, e.touches[0].clientY);
            }, { passive: true });
            document.addEventListener('touchend', () => isDragging = false);
        }

        function makeWindowResizable(win) {
            const handle = win.querySelector('.resize-handle');
            let isResizing = false, startX, startY, startW, startH;

            handle.addEventListener('mousedown', (e) => {
                if (win.classList.contains('maximized')) return;
                isResizing = true;
                startX = e.clientX; startY = e.clientY;
                startW = win.offsetWidth; startH = win.offsetHeight;
            });

            document.addEventListener('mousemove', (e) => {
                if (!isResizing) return;
                win.style.width = Math.max(400, startW + e.clientX - startX) + 'px';
                win.style.height = Math.max(300, startH + e.clientY - startY) + 'px';
            });
            document.addEventListener('mouseup', () => isResizing = false);
        }

        function updateTaskbar() {
            const taskbarApps = document.getElementById('taskbar-apps');
            taskbarApps.innerHTML = '';
            Object.keys(openWindows).forEach(appId => {
                const app = apps[appId];
                if (!app) return;
                const btn = document.createElement('div');
                btn.className = 'taskbar-app active';
                btn.innerHTML = `<span style="font-size:20px">${app.icon}</span>`;
                btn.onclick = () => {
                    const win = openWindows[appId];
                    if (win.style.display === 'none') win.style.display = 'block';
                    bringToFront(win);
                };
                taskbarApps.appendChild(btn);
            });
        }

        // Power button
        document.getElementById('power-btn').addEventListener('click', () => {
            if (confirm('–í—ã–∫–ª—é—á–∏—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä?')) {
                document.body.innerHTML = '<div style="background:#000;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;color:white;font-size:24px">–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã...</div>';
                setTimeout(() => document.body.innerHTML = '<div style="background:#000;width:100vw;height:100vh"></div>', 2000);
            }
        });

        // Search
        document.getElementById('search-box').addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                const query = e.target.value.toLowerCase();
                Object.keys(apps).forEach(appId => {
                    if (apps[appId].title.toLowerCase().includes(query)) {
                        openApp(appId);
                        e.target.value = '';
                    }
                });
            }
        });
    </script>
</body>
</html>
